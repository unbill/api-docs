
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Q2 Biller Direct API</title>
    <link href="images/favicon-8d3c5721.ico" rel="icon" type="image/ico" />
    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sa, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-c880d549.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-32dee635.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-e9bde216.js"></script>

  </head>

  <body class="index" data-languages="[]">
    <a href="#" id="nav-button">
      <span>
        <img src="images/navbar-6ad8e2f4.svg" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-4de89875.svg" class="logo" alt="" />
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#overview" class="toc-h1 toc-link" data-title="Overview">Overview</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#introduction" class="toc-h2 toc-link" data-title="Introduction">Introduction</a>
                  </li>
                  <li>
                    <a href="#testing" class="toc-h2 toc-link" data-title="Testing">Testing</a>
                  </li>
                  <li>
                    <a href="#gaining-access" class="toc-h2 toc-link" data-title="Gaining Access">Gaining Access</a>
                  </li>
                  <li>
                    <a href="#authentication" class="toc-h2 toc-link" data-title="Authentication">Authentication</a>
                  </li>
                  <li>
                    <a href="#errors" class="toc-h2 toc-link" data-title="Errors">Errors</a>
                  </li>
                  <li>
                    <a href="#request-ids" class="toc-h2 toc-link" data-title="Request IDs">Request IDs</a>
                  </li>
                  <li>
                    <a href="#getting-started" class="toc-h2 toc-link" data-title="Getting Started">Getting Started</a>
                  </li>
                  <li>
                    <a href="#message-security" class="toc-h2 toc-link" data-title="Message Security">Message Security</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#products" class="toc-h1 toc-link" data-title="Products">Products</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#webview-integration" class="toc-h2 toc-link" data-title="WebView Integration">WebView Integration</a>
                  </li>
                  <li>
                    <a href="#example-code" class="toc-h2 toc-link" data-title="Example Code">Example Code</a>
                  </li>
                  <li>
                    <a href="#connect" class="toc-h2 toc-link" data-title="Connect">Connect</a>
                  </li>
                  <li>
                    <a href="#cardswap" class="toc-h2 toc-link" data-title="CardSwap">CardSwap</a>
                  </li>
                  <li>
                    <a href="#biller-direct" class="toc-h2 toc-link" data-title="Biller Direct">Biller Direct</a>
                  </li>
                  <li>
                    <a href="#sessions" class="toc-h2 toc-link" data-title="Sessions">Sessions</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#auth" class="toc-h1 toc-link" data-title="Auth">Auth</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#the-auth-object" class="toc-h2 toc-link" data-title="The auth object">The auth object</a>
                  </li>
                  <li>
                    <a href="#auth-status" class="toc-h2 toc-link" data-title="Auth status">Auth status</a>
                  </li>
                  <li>
                    <a href="#auth-hold-codes" class="toc-h2 toc-link" data-title="Auth hold codes">Auth hold codes</a>
                  </li>
                  <li>
                    <a href="#list-all-auths" class="toc-h2 toc-link" data-title="List all auths">List all auths</a>
                  </li>
                  <li>
                    <a href="#fix-auth-hold" class="toc-h2 toc-link" data-title="Fix auth hold">Fix auth hold</a>
                  </li>
                  <li>
                    <a href="#answer-questions" class="toc-h2 toc-link" data-title="Answer questions">Answer questions</a>
                  </li>
                  <li>
                    <a href="#delete-auth" class="toc-h2 toc-link" data-title="Delete auth">Delete auth</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#bill" class="toc-h1 toc-link" data-title="Bill">Bill</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#the-bill-object" class="toc-h2 toc-link" data-title="The bill object">The bill object</a>
                  </li>
                  <li>
                    <a href="#bill-status" class="toc-h2 toc-link" data-title="Bill status">Bill status</a>
                  </li>
                  <li>
                    <a href="#bill-payment-schedule" class="toc-h2 toc-link" data-title="Bill payment schedule">Bill payment schedule</a>
                  </li>
                  <li>
                    <a href="#retrieve-bill-details" class="toc-h2 toc-link" data-title="Retrieve bill details">Retrieve bill details</a>
                  </li>
                  <li>
                    <a href="#list-all-bills" class="toc-h2 toc-link" data-title="List all bills">List all bills</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#company" class="toc-h1 toc-link" data-title="Company">Company</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#the-company-object" class="toc-h2 toc-link" data-title="The company object">The company object</a>
                  </li>
                  <li>
                    <a href="#company-logos" class="toc-h2 toc-link" data-title="Company logos">Company logos</a>
                  </li>
                  <li>
                    <a href="#company-categories" class="toc-h2 toc-link" data-title="Company categories">Company categories</a>
                  </li>
                  <li>
                    <a href="#retrieve-a-company" class="toc-h2 toc-link" data-title="Retrieve a company">Retrieve a company</a>
                  </li>
                  <li>
                    <a href="#search-for-companies" class="toc-h2 toc-link" data-title="Search for companies">Search for companies</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#payment" class="toc-h1 toc-link" data-title="Payment">Payment</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#the-card-object" class="toc-h2 toc-link" data-title="The card object">The card object</a>
                  </li>
                  <li>
                    <a href="#the-bank-object" class="toc-h2 toc-link" data-title="The bank object">The bank object</a>
                  </li>
                  <li>
                    <a href="#the-payment-method-object" class="toc-h2 toc-link" data-title="The payment method object">The payment method object</a>
                  </li>
                  <li>
                    <a href="#payment-status" class="toc-h2 toc-link" data-title="Payment status">Payment status</a>
                  </li>
                  <li>
                    <a href="#add-a-payment-method" class="toc-h2 toc-link" data-title="Add a payment method">Add a payment method</a>
                  </li>
                  <li>
                    <a href="#list-all-payment-methods" class="toc-h2 toc-link" data-title="List all payment methods">List all payment methods</a>
                  </li>
                  <li>
                    <a href="#delete-payment-method" class="toc-h2 toc-link" data-title="Delete payment method">Delete payment method</a>
                  </li>
                  <li>
                    <a href="#retry-payment-method" class="toc-h2 toc-link" data-title="Retry payment method">Retry payment method</a>
                  </li>
                  <li>
                    <a href="#assign-payment-method" class="toc-h2 toc-link" data-title="Assign payment method">Assign payment method</a>
                  </li>
                  <li>
                    <a href="#update-payment-settings" class="toc-h2 toc-link" data-title="Update payment settings">Update payment settings</a>
                  </li>
                  <li>
                    <a href="#schedule-payment" class="toc-h2 toc-link" data-title="Schedule payment">Schedule payment</a>
                  </li>
                  <li>
                    <a href="#cancel-payment" class="toc-h2 toc-link" data-title="Cancel payment">Cancel payment</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#client" class="toc-h1 toc-link" data-title="Client">Client</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#create-client" class="toc-h2 toc-link" data-title="Create Client">Create Client</a>
                  </li>
                  <li>
                    <a href="#create-token" class="toc-h2 toc-link" data-title="Create Token">Create Token</a>
                  </li>
                  <li>
                    <a href="#revoke-tokens" class="toc-h2 toc-link" data-title="Revoke Tokens">Revoke Tokens</a>
                  </li>
                  <li>
                    <a href="#sync-client" class="toc-h2 toc-link" data-title="Sync Client">Sync Client</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#swap" class="toc-h1 toc-link" data-title="Swap">Swap</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#the-swap-object" class="toc-h2 toc-link" data-title="The swap object">The swap object</a>
                  </li>
                  <li>
                    <a href="#swap-status" class="toc-h2 toc-link" data-title="Swap status">Swap status</a>
                  </li>
                  <li>
                    <a href="#add-a-swap" class="toc-h2 toc-link" data-title="Add a swap">Add a swap</a>
                  </li>
                  <li>
                    <a href="#company-list" class="toc-h2 toc-link" data-title="Company list">Company list</a>
                  </li>
                  <li>
                    <a href="#list-all-swaps" class="toc-h2 toc-link" data-title="List all swaps">List all swaps</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#partner" class="toc-h1 toc-link" data-title="Partner">Partner</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-public-keys" class="toc-h2 toc-link" data-title="Get public keys">Get public keys</a>
                  </li>
                  <li>
                    <a href="#get-specific-public-key" class="toc-h2 toc-link" data-title="Get specific public key">Get specific public key</a>
                  </li>
                  <li>
                    <a href="#get-latest-public-key" class="toc-h2 toc-link" data-title="Get latest public key">Get latest public key</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#events" class="toc-h1 toc-link" data-title="Events">Events</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#the-event-object" class="toc-h2 toc-link" data-title="The event object">The event object</a>
                  </li>
                  <li>
                    <a href="#types-of-events" class="toc-h2 toc-link" data-title="Types of events">Types of events</a>
                  </li>
                  <li>
                    <a href="#auth-success" class="toc-h2 toc-link" data-title="Auth success">Auth success</a>
                  </li>
                  <li>
                    <a href="#auth-invalid" class="toc-h2 toc-link" data-title="Auth invalid">Auth invalid</a>
                  </li>
                  <li>
                    <a href="#auth-deleted" class="toc-h2 toc-link" data-title="Auth deleted">Auth deleted</a>
                  </li>
                  <li>
                    <a href="#auth-hold" class="toc-h2 toc-link" data-title="Auth hold">Auth hold</a>
                  </li>
                  <li>
                    <a href="#auth-needs-resync" class="toc-h2 toc-link" data-title="Auth needs resync">Auth needs resync</a>
                  </li>
                  <li>
                    <a href="#bill-created" class="toc-h2 toc-link" data-title="Bill created">Bill created</a>
                  </li>
                  <li>
                    <a href="#bill-upcoming" class="toc-h2 toc-link" data-title="Bill upcoming">Bill upcoming</a>
                  </li>
                  <li>
                    <a href="#bill-update" class="toc-h2 toc-link" data-title="Bill update">Bill update</a>
                  </li>
                  <li>
                    <a href="#bill-scheduled-payment-notice" class="toc-h2 toc-link" data-title="Bill scheduled payment notice">Bill scheduled payment notice</a>
                  </li>
                  <li>
                    <a href="#bill-payment-sent" class="toc-h2 toc-link" data-title="Bill payment sent">Bill payment sent</a>
                  </li>
                  <li>
                    <a href="#bill-payment-scheduled" class="toc-h2 toc-link" data-title="Bill payment scheduled">Bill payment scheduled</a>
                  </li>
                  <li>
                    <a href="#bill-payment-cancelled" class="toc-h2 toc-link" data-title="Bill payment cancelled">Bill payment cancelled</a>
                  </li>
                  <li>
                    <a href="#bill-payment-failed" class="toc-h2 toc-link" data-title="Bill payment failed">Bill payment failed</a>
                  </li>
                  <li>
                    <a href="#swap-success" class="toc-h2 toc-link" data-title="Swap success">Swap success</a>
                  </li>
                  <li>
                    <a href="#webhook-security" class="toc-h2 toc-link" data-title="Webhook security">Webhook security</a>
                  </li>
              </ul>
          </li>
      </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='overview'>Overview</h1><h2 id='introduction'>Introduction</h2>
<blockquote>
<p>API Host</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>https://api.q2open.io/v1 (production)
https://sb-api.q2open.io/v1 (sandbox)
</code></pre></div>
<blockquote>
<p>Resource URL Patterns</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>/auth
/bill
/company
/payment
/client
</code></pre></div>
<p>Welcome! The Q2 Biller Direct API allows developers to receive user-authorized bill data and make payments on behalf of a user.</p>

<p>Here you will find information on how to integrate with and use the Q2 Biller Direct API. We&#39;ve tried to make this documentation user-friendly and example-filled, but please <a href="mailto:api@unbill.us">drop us a line</a> with any questions.</p>

<p>The Q2 Biller Direct API uses standard HTTP <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html">verbs</a> to communicate and HTTP <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html">response codes</a> to indicate status and errors. All responses come in standard <a href="http://www.json.org/">JSON</a>. The Q2 Biller Direct API is served over HTTPS to ensure data privacy, HTTP is not supported.</p>

<p><img src="https://s3.amazonaws.com/app-assets.unbill.io-primary/assets/docs/unbill.png" alt="Overview" /></p>
<h2 id='testing'>Testing</h2>
<p>To quickly experiment with the API, you can use Postman. You&#39;ll need to set the <code>apiHost</code> and <code>apiKey</code> environment variables.</p>

<div class="postman">
  <div class="postman-run-button" data-postman-action="collection/import" data-postman-var-1="e238fb8aba0a35436dd3"></div>
</div>

<script type="text/javascript">
  (function (p,o,s,t,m,a,n) {
    !p[s] && (p[s] = function () { (p[t] || (p[t] = [])).push(arguments); });
    !o.getElementById(s+t) && o.getElementsByTagName("head")[0].appendChild((
      (n = o.createElement("script")),
      (n.id = s+t), (n.async = 1), (n.src = m), n
    ));
  }(window, document, "_pm", "PostmanRunObject", "https://run.pstmn.io/button.js"));
</script>
<h3 id='test-company'>Test Company</h3>
<p>You may perform a test authentication with any company to test various use cases. Each use case is triggered based on the <code>username</code> or <code>email</code> used to authenticate. Any password may be used. Here&#39;s a list of credentials and their associated test case:</p>
<h3 id='test-credentials'>Test Credentials</h3>
<table><thead>
<tr>
<th>Input</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>test</code></td>
<td>Test a successful authentication.</td>
</tr>
<tr>
<td><code>testfail</code></td>
<td>Test an authentication failure.</td>
</tr>
<tr>
<td><code>testhold</code></td>
<td>Test an authentication hold.</td>
</tr>
<tr>
<td><code>testmfaquestion</code></td>
<td>Test an authentication requiring question-based MFA.</td>
</tr>
<tr>
<td><code>testmfacode</code></td>
<td>Test an authentication requiring code-based MFA.</td>
</tr>
<tr>
<td><code>testmfaprompt</code></td>
<td>Test an authentication requiring prompt-based MFA.</td>
</tr>
<tr>
<td><code>testpaymentfail</code></td>
<td>Test a payment failure.</td>
</tr>
<tr>
<td><code>testswap</code></td>
<td>Test performing a post-authentication swap. Useful when using Connect with a <code>paymentMethodId</code>.</td>
</tr>
</tbody></table>

<p>When a company requires an <code>email</code> as input, append <code>@test.test.</code> to any of the test credentials above. For example, to test an authentication failure, use <code>testfail@test.test</code>.</p>

<p>You may test a successful payment within the Sandbox environment by using <code>4111111111111111</code> as the card number, with any valid expiration, zipcode, and random 3-digit CVV.</p>
<h3 id='sandbox-limitations'>Sandbox Limitations</h3>
<ul>
<li>Always use the Test Merchant during development.</li>
<li>You cannot make payments on Sandbox.</li>
<li>When using your real account, there may be cases where it will accept invalid credentials or not retrieve your bill data. If you&#39;d like to do a real test with these providers, you&#39;ll need to use our production environment.</li>
<li>We&#39;re working to improve our sandbox environment to be more consistent with what you would experience on production when interacting with billers besides our Test Merchant.</li>
</ul>
<h2 id='gaining-access'>Gaining Access</h2>
<p>To gain access to the Q2 Biller Direct API, please <a href="mailto:api@unbill.us">contact us</a>. After our review process is complete, you&#39;ll be provided with an API key which you can use for your requests.</p>
<h2 id='authentication'>Authentication</h2>
<p>Authenticate your account when using the API by including your secret API key in the request. Your API keys carry many privileges, so be sure to keep them secret! Do not share your secret API keys in publicly accessible areas such as GitHub, client-side code, and so forth.</p>

<p>Authentication to the API is performed via bearer tokens. Pass your API Key as a bearer token in the <code>Authorization</code> header.</p>

<blockquote>
<p>Example Request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>  curl <span class="s2">"https://api.q2open.io/v1/bill/list/579b695decfa11012711875d"</span>
    <span class="nt">-H</span> <span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span>
</code></pre></div><h2 id='errors'>Errors</h2>
<p>Q2 Biller Direct API uses HTTP response status codes to indicate the success or failure of your API requests. If your request fails, Q2 Biller Direct API returns an error using the appropriate status code.</p>

<p>In general, there are three status code ranges you can expect:</p>

<ul>
<li><code>2xx</code> success status codes confirm that your request worked as expected</li>
<li><code>4xx</code> error status codes indicate an error because of the information provided (e.g., a required parameter was omitted)</li>
<li><code>5xx</code> error status codes are rare and indicate an error with Q2 Biller Direct API&#39;s servers</li>
</ul>
<h2 id='request-ids'>Request IDs</h2>
<p>Each API request has an associated request identifier. You can find this value in the response headers, under <code>request-id</code>. If you need to contact us about a specific request, providing the request identifier will ensure the fastest possible resolution.</p>
<h2 id='getting-started'>Getting Started</h2>
<p>Our <a href="#products">white-label products</a> are the fastest way to implement our API&#39;s functionality with a design that fits your branding. If you require a more custom integration you may use the following flow.</p>
<h3 id='user-creation'>User Creation</h3>
<ol>
<li>User signs up in your app.</li>
<li>Make a request to the <code>/client</code> endpoint to retrieve a <code>clientId</code> to store in your database for future requests.</li>
</ol>
<h3 id='authentication'>Authentication</h3>
<ol>
<li>Make a request to the <code>/client/create-token</code> endpoint to retrieve a secure SSO token to link accounts.</li>
<li>Link accounts by integrating the <a href="#connect">Connect</a> product into your application.</li>
</ol>
<h3 id='bills'>Bills</h3>
<ol>
<li>Requests can be made to the <code>/bill/list/{clientId}</code> endpoint to retrieve the list of authenticated bills and balance information.</li>
<li>Requests can be made to the <code>/bill/{billId}</code> endpoint to retrieve details on a specific bill.</li>
</ol>
<h3 id='payments'>Payments</h3>
<ol>
<li>Provide your user with a &quot;link payment&quot; view to choose a payment method.</li>
<li>Link this payment method using the <code>/payment</code> endpoint.</li>
<li>By default, bills will be paid automatically by using the payment method on file.</li>
<li>To change this, you must make a request to the <code>/payment/settings</code> endpoint to disable recurring payments.</li>
<li>When recurring payments are disabled, in order to make an on-demand payment, one must be scheduled via the <code>/payment/schedule</code> endpoint.</li>
<li>You can cancel a scheduled payment for a bill by using the <code>/payment/cancel</code> endpoint.</li>
</ol>
<h2 id='message-security'>Message Security</h2><h3 id='rsa-aes-encryption'>RSA/AES Encryption</h3>
<blockquote>
<p>Example Encrypted Request</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"encrypted"</span><span class="p">:</span><span class="w"> </span><span class="s2">"os8th269xgj7tyku7wxl"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PQ5+gSzli4DyOzXUYqT74QIZ9l4VIyWJipb521HfUnwwj0sNPp0ASyodxb3YOmhbM6nZ+bFXkPN1u2vcXo80yYcMy0xXmfcQ27LRsVjD8kLw7PC0LSfKh1ZHvx+xpxnHDDOYwqRMVFUHIz6ggxPJB39f7hZXRvp5JQQhnB/3JfpV/UvmXjhdQlgC50yOOIJ12S36cnncBrwqYvvDV7iY8Uq6x2ddZRl/2GNoUpnf9jIoKEqeNEpuqoD9g6cwcXXgbjyObxfl6zOSQlfgHJye/Me7E0d+4r0/OWhnSYC6GgedAwUM1fBVGAkAqQKEtU2BYD1kIP8hBSMJxWzVjqKn0A=="</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Optionally, message encryption may be used when making a <code>POST</code> request to the API.</p>

<ul>
<li>Message encryption uses a combination of AES and RSA encryption.

<ul>
<li>The message payload is encrypted using AES-CTR-256.</li>
<li>The resultant AES key is then encrypted using an RSA 2048-bit public key.</li>
</ul></li>
<li>RSA key-pairs can be created in the Nexus portal <code>Settings</code> view, and the public key can be copied.

<ul>
<li>A maximum of 2 keys can be created for key rotation purposes.</li>
<li>Public keys are copied in PCKS #8 format.</li>
<li>Public keys can also be retrieved from the <a href="#partner">partner public key API</a>.</li>
</ul></li>
</ul>

<p><img src="images/examples/api-encryption-keys-56db2fdd.png" alt="" /></p>

<ul>
<li>The <a href="https://github.com/unbill/examples">examples GitHub repository</a> includes an example of encrypting the payload with your public key using a combination of AES and RSA encryption.</li>
<li>Use the API routes as documented, however your payload will be encrypted and base64 encoded using the public key, and sent in a <code>hash</code> parameter.</li>
<li>Add an <code>encrypted</code> parameter to your request with the key identifier that is created when you generate an RSA key in Nexus.</li>
</ul>
<h3 id='rsa-request-signing'>RSA Request Signing</h3>
<blockquote>
<p>Example Signed Request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.q2open.io/v1/client/create-token"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Signature: MzfMtn6M9rpHyzGSvBPkzbNZlne+rf3tkcLUeMUW8mOMmdP1VtnnVdQA9hdYVObjwibOGdRQmCeoI9Xba5DXGT2/l9wOSJQ4FI90DssY1l+orOiwVwY8quAgBUYd2YDDUGyEJ31Y9yOgwLBp2xC4pA5vfkYtWAC9PccdxDyMZcCm6pz3AVgfCRN1m2rcZsE/VrhWhZof3sYitP3zTfV7KCF3T232HPHQtEYtEMLE4Pi7t4i+KvR4Rejt4a7DIgba3OfVmWf5La7WzdlU4eneIPnVjk3CGUo4t9PIPJQVbLyDSIXiF9pRD8ZlW+19XUe/HyWFHR4em00nbaNjBG4TSQ=="</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Date: 2019-09-17T14:14:24.874Z"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "identifier": "5b2bd638bdf6035960b98694"
  }'</span>
  <span class="nt">-X</span> POST
</code></pre></div>
<p>Optionally, 2048-bit asymmetric request signing may be used when making requests to the API.</p>
<h4 id='keypair-provisioning'>Keypair Provisioning</h4>
<p>API request signing key-pairs can be added manually in the Nexus portal or in automated fashion by providing an API endpoint.</p>
<h5 id='manual'>Manual</h5>
<ul>
<li>Create a 2048-bit RSA keypair following the PKCS #1/sha-256 signing scheme.</li>
<li>Update the API Request Signing Public Key in the Q2 Nexus portal <code>Settings</code> view.</li>
</ul>

<p><img src="images/examples/api-signing-key-manual-f34796cd.png" alt="" /></p>
<h5 id='partner-provided-api'>Partner Provided API</h5>
<p>An API endpoint may be provided by the partner which the Biller Direct/Cardswap system will use to
keep signing keys synchronized. Keys will be requested from the API daily. It is assumed that the expiration of
a new partner RSA signing key will be several days at a minimum.  If no valid keys are present, the BDCS
retrieval job will ping the partner endpoint several times daily to request valid keys.
The API must return keys in standard JWKS (JSON Web Key Set) format. Please refer to the
<a href="https://tools.ietf.org/html/rfc7517" target="_blank">JWK standards</a> for more information.</p>

<p>When setting up the API endpoint in Nexus, a collection of headers can also be added if the endpoint
requires additional metadata to function. Headers are provided in JSON format.</p>

<p><img src="images/examples/api-signing-key-url-1b9fbd6f.png" alt="" /></p>
<h4 id='signing-the-api-request'>Signing the API Request</h4>
<ul>
<li>With each request to the API, generate a signature using the following formula:

<ul>
<li>Request method in all uppercase: <code>POST/PUT/GET/DELETE</code> plus a colon.</li>
<li>Path and query of the request plus a colon.</li>
<li>Your API Key plus a colon.</li>
<li>The current date and time in ISO format</li>
<li>Example: <code>POST:/v1/client/create-token:YOUR_API_KEY:2019-09-17T14:14:24.874Z</code></li>
</ul></li>
<li>Use an RSA signing library to create an RSA signature from the signature text with the pkcs1-sha256 signing scheme.</li>
<li>Encode the produced signature as a Base64 string.</li>
<li>Add the Base64 signature in the <code>Signature</code> header of the request.</li>
<li>Add the date that was included in the signature to the <code>Date</code> header of the request.</li>
</ul>

<p>When request signing is enabled, a signature must be provided with every API request.
If the signature is not provided, a <code>401-Unauthorized</code> response will result.</p>
<h1 id='products'>Products</h1>
<p>Our white-label products are the fastest way to implement our API&#39;s functionality with a design that fits your branding. We&#39;ve built a set of products that key in on common use cases of our API. These products include <a href="#connect">Connect</a>, <a href="#cardswap">CardSwap</a> and <a href="#biller-direct">Biller Direct</a>.</p>
<h2 id='webview-integration'>WebView Integration</h2>
<p>Integration with our products is straightforward.</p>

<ol>
<li>Create a one-time use token by making a call to the <code>/client/create-token</code> endpoint.</li>
<li>SSO into the white-label product by passing in the token as a URL parameter. An example URL would look like this: <code>https://product.q2open.io?token=123</code>.</li>
</ol>
<h2 id='example-code'>Example Code</h2>
<p>See our <a href="https://github.com/unbill/connect-ios">iOS</a> and <a href="https://github.com/unbill/connect-android">Android</a> integration examples for example implementations in Swift and Java.</p>
<h2 id='connect'>Connect</h2>
<blockquote>
<p>Host</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>https://connect.q2open.io (production)
https://sb-connect.q2open.io (sandbox)
</code></pre></div>
<p><img src="images/products/connect-c195e2d4.gif" alt="" /></p>

<p>Connect is a drop-in module that provides a secure, elegant authentication flow for each company that the Q2 Biller Direct API supports. Connect makes it secure and easy for <a href="#client">clients</a> to link their accounts, while doing the heavy lifting for the authentication.</p>

<p><a href="https://connect.q2open.io">View demo</a></p>
<h3 id='events'>Events</h3>
<p>Connect will emit events back to your app using the browser <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage">postMessage</a> API, <a href="https://developer.apple.com/documentation/webkit/wkscriptmessagehandler">WKScriptMessageHandler</a> on iOS, or <a href="https://developer.android.com/reference/android/webkit/WebView#addJavascriptInterface(java.lang.Object,%20java.lang.String)">addJavascriptInterface</a> on Android, allowing you to decide what to do after the user is finished.</p>

<table><thead>
<tr>
<th>Event</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>auth</code></td>
<td>The user successfully authenticated with a company.</td>
</tr>
<tr>
<td><code>exit</code></td>
<td>The user exited the module without completing an authentication.</td>
</tr>
<tr>
<td><code>alive</code></td>
<td>Emitted every 30 seconds to indicate that the user is not idle.</td>
</tr>
</tbody></table>
<h3 id='userpresencerequired'>userPresenceRequired</h3>
<p>If the company requires that the user is present to pass through any security flows with every login,
as indicated by the <code>company.userPresenceRequired</code> flag, there are a number of constraints to consider when designing your user experience:</p>

<ul>
<li>Bill data cannot be updated ad-hoc without the user first passing through security.</li>
<li>Payments must be completed in real-time (not scheduled) since the user must be present.</li>
<li>Likewise, Swaps must also be completed in real-time with the user present.</li>
</ul>

<p>Instead of calling the typical API routes, you&#39;ll need to open Connect to perform these actions immediately after a successful authentication. The user won&#39;t need
 to re-enter their username and password, but may need to step through security. Using the <code>authId</code>, <code>billId</code>, <code>items</code>, and <code>paymentMethodId</code> URL parameters as
 documented below, you&#39;ll be able to make payments and swaps in real-time, while allowing users the liberty of maintaining their approach to account security.</p>
<h3 id='url-parameters'>URL parameters</h3>
<p>The following URL parameters can be optionally passed into the Connect URL to customize the experience.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>companyId</code></td>
<td>Deeplink to a specific <code>companyId</code>, skipping the search screen.</td>
</tr>
<tr>
<td><code>swapId</code></td>
<td>Can be used in conjunction with <code>paymentMethodId</code> to move a swap to a different payment method.</td>
</tr>
<tr>
<td><code>billId</code></td>
<td>Can be used in conjunction with <code>paymentMethodId</code> to make a payment when <code>company.userPresenceRequired</code> is <code>true</code>.</td>
</tr>
<tr>
<td><code>cardPaymentsOnly</code></td>
<td>Limit searches to companies that support card-based payments.</td>
</tr>
<tr>
<td><code>items</code></td>
<td>Indicates the next desired action once an authentication is successful. Set to <code>swap</code> to automatically create a <a href="#swap">Swap</a>. Set to <code>bill</code> to update bill data. Set to <code>payment</code> (in conjuction with a billId) to make a real-time payment towards the balance.</td>
</tr>
<tr>
<td><code>paymentMethodId</code></td>
<td>Sets a previously added payment method to be used for a <code>swap</code> or <code>payment</code> once an authentication is successful.</td>
</tr>
</tbody></table>
<h3 id='url-examples'>URL Examples</h3>
<p>To authenticate with a company:</p>

<p><code>https://connect.q2open.io?token=123&amp;companyId=123&amp;items=bill</code></p>

<p>To make a payment when <code>company.userPresenceRequired</code> is <code>true</code>:</p>

<p><code>https://connect.q2open.io?token=123&amp;billId=123&amp;paymentMethodId=123&amp;items=payment</code></p>

<p>To initiate a new swap:</p>

<p><code>https://connect.q2open.io?token=123&amp;companyId=123&amp;paymentMethodId=123&amp;items=swap</code></p>

<p>To move a swap to a different payment method:</p>

<p><code>https://connect.q2open.io?token=123&amp;swapId=123&amp;paymentMethodId=123&amp;items=swap</code></p>
<h2 id='cardswap'>CardSwap</h2>
<blockquote>
<p>Host</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>https://cardswap.q2open.io (production)
https://sb-cardswap.q2open.io (sandbox)
</code></pre></div>
<p><img src="images/products/cardswap-51e19c7f.gif" alt="" /></p>

<p>Q2 CardSwap™ is the first switch kit for subscription and eCommerce merchants, allowing users to put your card top-of-wallet for their favorite services—all in one place.</p>

<p><a href="https://cardswap.q2open.io">View demo</a></p>
<h3 id='events'>Events</h3>
<p>CardSwap will emit events back to your app using the browser <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage">postMessage</a> API, <a href="https://developer.apple.com/documentation/webkit/wkscriptmessagehandler">WKScriptMessageHandler</a> on iOS, or <a href="https://developer.android.com/reference/android/webkit/WebView#addJavascriptInterface(java.lang.Object,%20java.lang.String)">addJavascriptInterface</a> on Android, allowing you to decide what to do after the user is finished.</p>

<table><thead>
<tr>
<th>Event</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>finish</code></td>
<td>Occurs when the user successfully completes the swap process. Only emits when the <code>startView</code> URL parameter is set to <code>brands</code>.</td>
</tr>
</tbody></table>
<h3 id='url-parameters'>URL parameters</h3>
<p>The following URL parameters can be optionally passed into the CardSwap URL to customize the experience.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>startView</code></td>
<td>Indicates where users are redirected to after completing a swap. Set to <code>brands</code> to skip the introductory page and return users to the brand selection page.</td>
</tr>
<tr>
<td><code>sessionId</code></td>
<td><a href="#sessions">Session</a> ID to be linked to corresponding <a href="#event">Events</a>.</td>
</tr>
</tbody></table>
<h2 id='biller-direct'>Biller Direct</h2>
<blockquote>
<p>Host</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>https://biller-direct.q2open.io (production)
https://sb-biller-direct.q2open.io (sandbox)
</code></pre></div>
<p><img src="images/products/biller-direct-d6d58328.gif" alt="" /></p>

<p>Biller Direct is a card-enabled bill pay solution designed to dramatically improve the user experience and economic model of bill pay.</p>

<p><a href="https://biller-direct.q2open.io">View demo</a></p>
<h3 id='events'>Events</h3>
<p>Biller Direct will emit events back to your app using the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage">postMessage</a> API or <a href="https://developer.apple.com/documentation/webkit/wkscriptmessagehandler">WKScriptMessageHandler</a> on iOS, allowing you to decide what to do after the user is finished.</p>

<table><thead>
<tr>
<th>Event</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>alive</code></td>
<td>Emitted every 30 seconds to indicate that the user is not idle.</td>
</tr>
</tbody></table>
<h3 id='url-parameters'>URL parameters</h3>
<p>The following URL parameters can be optionally passed into the Biller Direct URL to customize the experience.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>companyId</code></td>
<td>Deeplink to a specific bill for the <code>companyId</code> specified if a bill already exists, or fallback to the authentication screen for the specified <code>companyId</code>.</td>
</tr>
<tr>
<td><code>billId</code></td>
<td>Setting to a specific <a href="#bill">Bill</a> <code>_id</code> will deeplink the user into the detailed view of the bill.</td>
</tr>
<tr>
<td><code>skipOnboarding</code></td>
<td>Setting to <code>true</code> will skip the introductory screens and animations.</td>
</tr>
<tr>
<td><code>cardPaymentsOnly</code></td>
<td>Limit searches to companies that support card-based payments.</td>
</tr>
</tbody></table>
<h2 id='sessions'>Sessions</h2>
<blockquote>
<p>Example Event with <code>sessionId</code></p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"580e3e11dec21e861b5a3719"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"session.example"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-04-20T16:51:12Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"sessionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yoursessionid"</span><span class="w">
    </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa11012711875d"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"example"</span><span class="p">:</span><span class="w"> </span><span class="s2">"session"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Adding a <code>sessionId</code> as a URL parameter will link that <code>sessionId</code> to any <a href="#event">Events</a> that happen during your customer&#39;s session. We recommend creating a new <code>sessionId</code> every time a customer uses a white-label product.</p>
<h3 id='url-example'>URL Example</h3>
<p><code>https://cardswap.q2open.io?token=123&amp;sessionId=yoursessionid</code></p>
<h1 id='auth'>Auth</h1>
<p>Authenticating <a href="#client">client</a> accounts can be implemented using the <a href="#connect">Connect</a> product.</p>
<h2 id='the-auth-object'>The auth object</h2>
<blockquote>
<p>Example Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decea110719b1874d"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verified"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decea110719b1874d"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Netflix"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"logo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/app-assets.unbill.io-primary/uploads/utility-provider-logos/7242937ba29042cce61a8e4745269fce.png"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"background"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">}</span><span class="w"> 
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>_id</code></td>
<td>ID of the auth.</td>
</tr>
<tr>
<td><code>status</code></td>
<td><a href="#auth-status">Status</a> of the auth.</td>
</tr>
<tr>
<td><code>company</code></td>
<td>Company Object</td>
</tr>
</tbody></table>
<h2 id='auth-status'>Auth status</h2>
<blockquote>
<p>Verified Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verified"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Authenticate Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"authenticate"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Hold Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hold"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"reason"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"userMessage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"You need to login and verify your account information."</span><span class="p">,</span><span class="w">
    </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"account_issue_verify_identity"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>MFA Required Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mfa-required"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"mfa"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"questions"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mfa"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
      </span><span class="nl">"question"</span><span class="p">:</span><span class="w"> </span><span class="s2">"What city did you grow up in?"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1j5k2l1"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"question"</span><span class="p">:</span><span class="w"> </span><span class="s2">"What is your favorite food?"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3buw78h3"</span><span class="w">
    </span><span class="p">}]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>An auth <code>status.type</code> can be a variety of types. Each type is documented below with a description of the status and a typical use case.</p>
<h3 id='verified'>verified</h3>
<p>The user&#39;s auth has been verified. No actions are required.</p>
<h3 id='authenticate'>authenticate</h3>
<p>The auth&#39;s credentials are no longer valid and need to be reauthenticated using the <a href="#connect">Connect</a> product.</p>

<p><img src="https://s3.amazonaws.com/app-assets.unbill.io-primary/assets/docs/bill-authenticate.png" alt="Bill Authenticate" /></p>
<h3 id='hold'>hold</h3>
<p>An auth&#39;s status can be <code>hold</code> for several reasons. When an auth is on hold, the response contains a <code>reason</code> for the hold that you can present to your users. To fix the hold, the user must perform the action described in the <code>reason</code>, which usually requires them to log in to their online account. Once the user has completed the action, make a request to the <code>/auth/{authId}/fix-hold</code> endpoint to resume their services.</p>

<p>Additionally, a <a href="#auth-hold-codes">code</a> is provided for handling the hold programmatically, if required.</p>

<p><em>Display hold reason</em></p>

<p><img src="https://s3.amazonaws.com/app-assets.unbill.io-primary/assets/docs/bill-hold.png" alt="Bill Hold" /></p>

<p><em>Displayed after user returns to app</em></p>

<p><img src="https://s3.amazonaws.com/app-assets.unbill.io-primary/assets/docs/bill-hold-confirm.png" alt="Bill Hold Confirm" /></p>
<h3 id='mfa-required'>MFA Required</h3>
<p>When the link with a company requires additional MFA.</p>
<h2 id='auth-hold-codes'>Auth hold codes</h2>
<p><a href="#hold">Auth hold&#39;s</a> include a code - a short string with a brief explanation - as a value for <code>code</code>. Below is a list of possible codes that can be returned, along with our default messaging and the products they relate to.</p>
<h3 id='account_issue_apple_pay_on_file'>account_issue_apple_pay_on_file</h3>
<p>Your payment method could not be updated because your iTunes payments are made via Apple Pay. Please update your payment method directly through Apple Pay.</p>

<p><label class="tag">CardSwap</label></p>
<h3 id='account_issue_disney_plus_third_party_on_file'>account_issue_disney_plus_third_party_on_file</h3>
<p>Your Disney+ subscription is currently being paid by a third party provider such as iTunes, Verizon, or the Disney bundle. Sign in to your Disney+ account if you want to change the payment method to your card.</p>

<p><label class="tag">CardSwap</label></p>
<h3 id='account_issue_payment_details_required'>account_issue_payment_details_required</h3>
<p>This provider requires additional information. Contact them directly to update your payment method.</p>

<p><label class="tag">CardSwap</label></p>
<h3 id='account_issue_with_swap'>account_issue_with_swap</h3>
<p>We couldn&#39;t update your payment method because of an issue with your account. Please go to the provider directly to update your payment method.</p>

<p><label class="tag">CardSwap</label></p>
<h3 id='account_issue_primary_account_holder'>account_issue_primary_account_holder</h3>
<p>We can&#39;t update your payment method because you aren&#39;t the primary account holder for this provider. Please provide the username and password of the main account holder.</p>

<p><label class="tag">CardSwap</label></p>
<h3 id='account_issue_card_not_accepted'>account_issue_card_not_accepted</h3>
<p>We can&#39;t update your payment method because this card isn&#39;t accepted by the provider. Contact the provider directly to resolve this issue, then try again.</p>

<p><label class="tag">CardSwap</label></p>
<h3 id='account_issue_max_cards_on_file'>account_issue_max_cards_on_file</h3>
<p>We can&#39;t update your payment method because the provider won&#39;t allow any more cards to be added. Please sign in directly on the provider&#39;s website to remove a payment method and try again.</p>

<p><label class="tag">CardSwap</label></p>
<h3 id='account_issue_third_party_connected'>account_issue_third_party_connected</h3>
<p>We couldn&#39;t update your payment method because you&#39;re paying for your subscription through a third-party provider (like PayPal or Google Play). Please go to the third-party provider directly to update your payment method.</p>

<p><label class="tag">CardSwap</label></p>
<h3 id='account_issue_third_party_available'>account_issue_third_party_available</h3>
<p>We couldn&#39;t update your payment method because you&#39;re paying for your subscription through a third party, such as iTunes or Amazon. To change your payment method, select the third party from the list of providers to add your card.</p>

<p><label class="tag">CardSwap</label></p>
<h3 id='account_issue_no_active_subscription'>account_issue_no_active_subscription</h3>
<p>We couldn&#39;t add your card because you don&#39;t have an active subscription with this provider. Please activate your subscription and try again.</p>

<p><label class="tag">CardSwap</label></p>
<h3 id='system_issue_with_swap'>system_issue_with_swap</h3>
<p>We couldn&#39;t update your payment method because of a technical problem. Please try again.</p>

<p><label class="tag">CardSwap</label></p>
<h3 id='account_set_up_online_payments'>account_set_up_online_payments</h3>
<p>Your account is not set up for online payments. Log in to your account and set up online payments.</p>

<p><label class="tag">Biller Direct</label></p>
<h3 id='partner_expiration_exceeded'>partner_expiration_exceeded</h3>
<p>This request has exceeded your financial institution&#39;s expiration policy.</p>

<p><label class="tag">CardSwap</label></p>
<h3 id='account_issue_account_locked'>account_issue_account_locked</h3>
<p>Your account has been locked. Unlock your account directly through your provider and try again.</p>

<p><label class="tag">Biller Direct</label></p>
<h3 id='account_issue_verify_identity'>account_issue_verify_identity</h3>
<p>Please log in to your account to set up and verify your personal information.</p>

<p><label class="tag">Biller Direct</label></p>
<h3 id='account_issue_accept_toc'>account_issue_accept_toc</h3>
<p>Please log in to your account and accept the Terms and Conditions.</p>

<p><label class="tag">Biller Direct</label></p>
<h3 id='account_issue_no_service_account'>account_issue_no_service_account</h3>
<p>Please log in to your account and add a service account.</p>

<p><label class="tag">Biller Direct</label></p>

<!--

These are Biller Direct holds we'll add in later

### account_issue_third_party_payments_on_file

We're unable to access your bill information because your account is connected to a third-party provider.

<label class="tag">Biller Direct</label>

### system_issue_with_bill

We're unable to access your bill information because of a system issue. Please try again later.

<label class="tag">Biller Direct</label>

### system_issue_with_bill_payment

We're unable to submit this payment because of a system issue.  Please try again later.

<label class="tag">Biller Direct</label>

### account_paid_in_full

We’re unable to locate a balance on your account because it is paid in full.

<label class="tag">Biller Direct</label>

### account_issue_payment_restrictions

We're unable to submit payments due to restrictions on your account.

<label class="tag">Biller Direct</label>

### account_issue_inactive_account

We're unable to make payments on inactive accounts.

<label class="tag">Biller Direct</label>

-->
<h2 id='list-all-auths'>List all auths</h2>
<blockquote>
<p>Example Request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.q2open.io/v1/auth/list/566595c8ce88ccec69328566"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span> <span class="se">\</span>
  <span class="nt">-G</span>
</code></pre></div>
<blockquote>
<p>Example Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa11012711875d"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verified"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decea110719b1874d"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Time Warner Cable"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"logo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/app-assets.unbill.io-primary/uploads/utility-provider-logos/4c805851c738c006546b234e3c3c793d.png"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"background"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
        </span><span class="p">}</span><span class="w"> 
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w"> 
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa11012711875d"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"authenticate"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decea110719b1874d"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The Grove at Auburn"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"logo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/app-assets.unbill.io-primary/uploads/utility-provider-logos/0e9a971a96646da46f5faa68862d0f2d.jpg"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"background"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">}</span><span class="w"> 
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retrieves a list of client&#39;s auths.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET https://api.q2open.io/v1/auth/list/{clientId}</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>clientId</code></td>
<td>ID of client to retrieve auths for.</td>
</tr>
</tbody></table>
<h3 id='returns'>Returns</h3>
<p>A dictionary with a <code>data</code> property that contains an array of <a href="#the-auth-object">auth objects</a>.</p>
<h2 id='fix-auth-hold'>Fix auth hold</h2>
<blockquote>
<p>Example Request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.q2open.io/v1/auth/566595c8ce88ccec69328566/fix-hold"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST
</code></pre></div>
<blockquote>
<p>Example Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://api.q2open.io/v1/auth/{authId}/fix-hold</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>authId</code></td>
<td>ID of auth to fix.</td>
</tr>
</tbody></table>
<h3 id='returns'>Returns</h3>
<p>Returns an object with a <code>success</code> property if the hold was fixed. If the <code>authId</code> does not exist, this call returns an error.</p>
<h2 id='answer-questions'>Answer questions</h2>
<blockquote>
<p>Example Request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.q2open.io/v1/auth/{authId}/answer-questions"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "answers": [{
      "answer": "Seattle",
      "identifier": "1j5k2l1" 
    },
    {
      "answer": "Pickles",
      "identifier": "3buw78h3" 
    }]
  }'</span>
</code></pre></div>
<p>Accepts a list of answers to the questions presented when an auth has the <code>mfa-required</code> status.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://api.q2open.io/v1/auth/{authId}/answer-questions</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>answers</code></td>
<td>List of answered questions.</td>
</tr>
</tbody></table>
<h3 id='returns'>Returns</h3>
<p>Returns an object with a <code>success</code> property indicating the answers were linked to the auth. Returns an error otherwise.</p>
<h2 id='delete-auth'>Delete auth</h2>
<blockquote>
<p>Example Request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.q2open.io/v1/auth/566595c8ce88ccec69328566"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE
</code></pre></div>
<blockquote>
<p>Example Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Deletes an <code>auth</code> and all its <code>items</code> from the account.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>DELETE https://api.q2open.io/v1/auth/{authId}</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>authId</code></td>
<td>ID of bill to delete.</td>
</tr>
</tbody></table>
<h3 id='returns'>Returns</h3>
<p>Returns an object with a <code>success</code> property if the auth was deleted. If the <code>authId</code> does not exist, this call returns an error.</p>
<h1 id='bill'>Bill</h1>
<p>The bill object provides you with up-to-date balance, due date, and payment history for a bill. The API allows you to retrieve, list, and check the status of a user&#39;s bills.</p>
<h2 id='the-bill-object'>The bill object</h2>
<blockquote>
<p>Example Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decea110719b1874d"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"customPaymentAmount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"50.00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"dueDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-10-25T00:00:00.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-10-25T00:00:00.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"upcoming"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"recurring"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enabled"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"schedule"</span><span class="p">:</span><span class="w"> </span><span class="s2">"on-due-date"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decea110719b1874d"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Netflix"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"logo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/app-assets.unbill.io-primary/uploads/utility-provider-logos/7242937ba29042cce61a8e4745269fce.png"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"background"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"schedule"</span><span class="p">:</span><span class="w"> </span><span class="s2">"on-due-date"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>_id</code></td>
<td>ID of the bill.</td>
</tr>
<tr>
<td><code>balance</code></td>
<td>Current bill balance.</td>
</tr>
<tr>
<td><code>dueDate</code></td>
<td>Current bill due date.</td>
</tr>
<tr>
<td><code>customPaymentAmount</code></td>
<td>Custom amount specified by the user to pay towards their outstanding balance. Only defined if the user has specified a custom amount to be paid.</td>
</tr>
<tr>
<td><code>lastPaidAmount</code></td>
<td>Amount of last payment.</td>
</tr>
<tr>
<td><code>lastPaidOn</code></td>
<td>The date when this bill was last paid.</td>
</tr>
<tr>
<td><code>payDate</code></td>
<td>The date when the next bill will be paid.</td>
</tr>
<tr>
<td><code>status</code></td>
<td><a href="#bill-status">Status</a> of the bill.</td>
</tr>
<tr>
<td><code>company</code></td>
<td><a href="#the-company-object">Company object</a> related to the bill.</td>
</tr>
<tr>
<td><code>settings</code></td>
<td>Settings for a bill.</td>
</tr>
<tr>
<td><code>settings.recurring</code></td>
<td>Whether or not payments are scheduled automatically. Possible values are <code>enabled</code>, <code>disabled</code>.</td>
</tr>
<tr>
<td><code>settings.schedule</code></td>
<td>The <a href="#bill-payment-schedule">schedule</a> for when a bill payment will be made.</td>
</tr>
</tbody></table>
<h2 id='bill-status'>Bill status</h2>
<blockquote>
<p>Syncing Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"syncing"</span><span class="w">
  </span><span class="p">},</span><span class="w"> 
  </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"recurring"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enabled"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"schedule"</span><span class="p">:</span><span class="w"> </span><span class="s2">"day-before"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Nothing Due Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"zero-balance"</span><span class="w">
  </span><span class="p">},</span><span class="w"> 
  </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"recurring"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enabled"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"schedule"</span><span class="p">:</span><span class="w"> </span><span class="s2">"day-before"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Overdue Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"dueDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-25T00:00:00.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-03-24T00:00:00.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"overdue"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"recurring"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enabled"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"schedule"</span><span class="p">:</span><span class="w"> </span><span class="s2">"day-before"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Payment Required Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"payment-required"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"recurring"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enabled"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"schedule"</span><span class="p">:</span><span class="w"> </span><span class="s2">"day-before"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"requiredPayment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Payment Declined Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"payment-declined"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"recurring"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enabled"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"schedule"</span><span class="p">:</span><span class="w"> </span><span class="s2">"day-before"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Upcoming Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"dueDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-10-25T00:00:00.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-10-24T00:00:00.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"upcoming"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"recurring"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enabled"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"schedule"</span><span class="p">:</span><span class="w"> </span><span class="s2">"day-before"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Pending Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"dueDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-10-25T00:00:00.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-10-24T00:00:00.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"recurring"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enabled"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"schedule"</span><span class="p">:</span><span class="w"> </span><span class="s2">"day-before"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Paid Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paid"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"lastPaidAmount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"lastPaidOn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-01-01T00:00:00.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"recurring"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enabled"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"schedule"</span><span class="p">:</span><span class="w"> </span><span class="s2">"day-before"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>A bill&#39;s <code>status.type</code> can be a variety of types. Each type is documented below with a description of the status and a typical use case.</p>
<h3 id='syncing'>syncing</h3>
<p>Our system is currently retrieving data.</p>

<p><img src="https://s3.amazonaws.com/app-assets.unbill.io-primary/assets/docs/bill-syncing.png" alt="Bill Syncing" /></p>
<h3 id='zero-balance'>zero-balance</h3>
<p>Bill data is not available yet. Most common reason is that the user hasn&#39;t received a bill. (change image)</p>

<p><img src="https://s3.amazonaws.com/app-assets.unbill.io-primary/assets/docs/bill-zero-balance.png" alt="Bill Zero Balance" /></p>
<h3 id='overdue'>overdue</h3>
<p>The due date for the bill has passed, and no payment has been made. Common reasons for an overdue bill are:</p>

<ul>
<li>A user adds a bill that is already overdue.</li>
<li><code>recurring</code> is enabled and the user has no payment method or their payment method&#39;s status is <code>failed</code>.</li>
<li><code>recurring</code> is disabled and a payment has not been scheduled via the <code>/payment/schedule</code> endpoint.</li>
</ul>

<p><img src="https://s3.amazonaws.com/app-assets.unbill.io-primary/assets/docs/bill-overdue.png" alt="Bill Overdue" /></p>
<h3 id='payment-required'>payment-required</h3>
<p>The payment method specified by <code>company.requiredPayment</code> is required to pay this bill. A linked payment method must be assigned before bill payments will resume. This can be done via the <code>/payment/{paymentMethodId}/assign</code> endpoint.</p>

<p><img src="https://s3.amazonaws.com/app-assets.unbill.io-primary/assets/docs/bill-authenticate.png" alt="Payment required" /></p>
<h3 id='payment-declined'>payment-declined</h3>
<p>The payment method used to pay this bill was declined. To resume bill payments, have the user try their payment method again via the <code>/payment/{paymentMethodId}/retry</code> endpoint, or assign another one via the <code>/payment/{paymentMethodId}/assign</code> endpoint.</p>

<p><img src="https://s3.amazonaws.com/app-assets.unbill.io-primary/assets/docs/bill-authenticate.png" alt="Payment declined" /></p>
<h3 id='upcoming'>upcoming</h3>
<p>The user has an outstanding balance on their account that will be paid in the future.</p>

<p><img src="https://s3.amazonaws.com/app-assets.unbill.io-primary/assets/docs/bill-upcoming.png" alt="Bill Upcoming" /></p>
<h3 id='pending'>pending</h3>
<p>The user has an outstanding balance with a future due date.</p>

<p><img src="https://s3.amazonaws.com/app-assets.unbill.io-primary/assets/docs/bill-pending.png" alt="Bill Pending" /></p>
<h3 id='paid'>paid</h3>
<p>The user has no outstanding balance and has a last paid amount on their account.</p>

<p><img src="https://s3.amazonaws.com/app-assets.unbill.io-primary/assets/docs/bill-paid.png" alt="Bill Paid" /></p>
<h2 id='bill-payment-schedule'>Bill payment schedule</h2>
<p>A bill&#39;s <code>settings.schedule</code> is the number of days before the due date when a bill will be paid. This schedule will be followed when <code>settings.recurring</code> is enabled and the company allows it.
<br><br>
The bill&#39;s <code>payDate</code> is the date in which the next bill payment will be made. When recurring payments are enabled, the <code>payDate</code> is calculated by the assigned <code>settings.schedule</code>. When recurring payments are disabled, one-time payments may be scheduled on-demand via the <code>/payment/schedule</code> endpoint. Available <code>settings.schedule</code> options are documented below.</p>
<h3 id='ten-days-before'>ten-days-before</h3>
<p>A payment will be made ten days before the due date.</p>
<h3 id='five-days-before'>five-days-before</h3>
<p>A payment will be made five days before the due date.</p>
<h3 id='day-before'>day-before</h3>
<p>A payment will be made the day before the due date.</p>
<h3 id='on-due-date'>on-due-date</h3>
<p>A payment will be made on the due date.</p>
<h3 id='immediately'>immediately</h3>
<p>A payment will be made as soon as a new bill is received.</p>
<h2 id='retrieve-bill-details'>Retrieve bill details</h2>
<blockquote>
<p>Example Request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.q2open.io/v1/bill/566595c8ce88ccec69328566"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span> <span class="se">\</span>
  <span class="nt">-G</span>
</code></pre></div>
<blockquote>
<p>Example Upcoming Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"bill"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa11012711875d"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"dueDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-10-25T00:00:00.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-10-25T00:00:00.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"upcoming"</span><span class="w">
    </span><span class="p">},</span><span class="w"> 
    </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"recurring"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enabled"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"schedule"</span><span class="p">:</span><span class="w"> </span><span class="s2">"on-due-date"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decea110719b1874d"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Netflix"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"logo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/app-assets.unbill.io-primary/uploads/utility-provider-logos/7242937ba29042cce61a8e4745269fce.png"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"background"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"schedule"</span><span class="p">:</span><span class="w"> </span><span class="s2">"on-due-date"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"payments"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Example Paid Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"bill"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa11012711875d"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paid"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"lastPaidAmount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lastPaidOn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-01-01T00:00:00.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"recurring"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enabled"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"schedule"</span><span class="p">:</span><span class="w"> </span><span class="s2">"on-due-date"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decea110719b1874d"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Netflix"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"logo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/app-assets.unbill.io-primary/uploads/utility-provider-logos/7242937ba29042cce61a8e4745269fce.png"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"background"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"schedule"</span><span class="p">:</span><span class="w"> </span><span class="s2">"on-due-date"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"payments"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123.12"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"paidOn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-01-01T00:00:00.000Z"</span><span class="w">
  </span><span class="p">},{</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"153.19"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"paidOn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-01-02T00:00:00.000Z"</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retrieve details about a bill including outstanding balance, due date, settings, status, and payment history.</p>

<p><img src="https://s3.amazonaws.com/app-assets.unbill.io-primary/assets/docs/detail.png" alt="Detail" /></p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET https://api.q2open.io/v1/bill/{billId}</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>billId</code></td>
<td>ID of bill to retrieve.</td>
</tr>
</tbody></table>
<h3 id='returns'>Returns</h3>
<p>Returns details for a bill if a valid <code>billId</code> was provided. Returns an error otherwise.</p>
<h2 id='list-all-bills'>List all bills</h2>
<blockquote>
<p>Example Request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>  curl https://api.q2open.io/v1/bill/list/579b695decfa11012711875d
    <span class="nt">-H</span> <span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span>
    <span class="nt">-G</span>
</code></pre></div>
<blockquote>
<p>Example Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"bill"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa11012711875d"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100.00"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"customPaymentAmount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"50.00"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"dueDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-10-25T00:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"payDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-10-25T00:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"upcoming"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"recurring"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enabled"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"schedule"</span><span class="p">:</span><span class="w"> </span><span class="s2">"on-due-date"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decea110719b1874d"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Netflix"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"logo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/app-assets.unbill.io-primary/uploads/utility-provider-logos/7242937ba29042cce61a8e4745269fce.png"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"background"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"schedule"</span><span class="p">:</span><span class="w"> </span><span class="s2">"on-due-date"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"payments"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"bill"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa11012711875d"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paid"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"lastPaidAmount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"lastPaidOn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-01-01T00:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"recurring"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enabled"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"schedule"</span><span class="p">:</span><span class="w"> </span><span class="s2">"day-before"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decea110719b1874d"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Netflix"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"logo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/app-assets.unbill.io-primary/uploads/utility-provider-logos/7242937ba29042cce61a8e4745269fce.png"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"background"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"payments"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123.12"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"paidOn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-01-01T00:00:00.000Z"</span><span class="w">
      </span><span class="p">},{</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"153.19"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"paidOn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-01-02T00:00:00.000Z"</span><span class="w">
      </span><span class="p">}]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retrieves a list of client&#39;s bills.</p>

<p><img src="https://s3.amazonaws.com/app-assets.unbill.io-primary/assets/docs/overview.png" alt="Overview" /></p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET https://api.q2open.io/v1/bill/list/{clientId}</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>clientId</code></td>
<td>ID of the client to retrieve bills for.</td>
</tr>
</tbody></table>
<h3 id='returns'>Returns</h3>
<p>A dictionary with a <code>data</code> property that contains an array of bill details.</p>
<h1 id='company'>Company</h1>
<p>Company objects allow you to authenticate bills with your users. The API allows you to retrieve and search for companies.</p>
<h2 id='the-company-object'>The company object</h2>
<blockquote>
<p>Sample Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decea110719b1874d"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Netflix"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"operational"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"logo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/app-assets.unbill.io-primary/uploads/utility-provider-logos/7242937ba29042cce61a8e4745269fce.png"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"background"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"svg"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/app-assets.unbill.io-primary/uploads/utility-provider-logos/7242937ba29042cce61a8e4745269fce.svg"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"color"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FF041F"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"requiredPayment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bank"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"schedule"</span><span class="p">:</span><span class="w"> </span><span class="s2">"on-due-date"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"additionalPaymentOptions"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"custom-payment-amount"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"settings"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"canExceedBalance"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}]</span><span class="w">
  </span><span class="nl">"auth"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"urls"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.netflix.com/Login"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"signup"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.netflix.com"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"loginFields"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
      </span><span class="nl">"placeholder"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Username"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"formType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"username"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Username"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"placeholder"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Password"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"formType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Password"</span><span class="w">
    </span><span class="p">}]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"geo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"lat"</span><span class="p">:</span><span class="w"> </span><span class="mf">30.70</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lng"</span><span class="p">:</span><span class="w"> </span><span class="mf">-95.53</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state_short"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TX"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state_long"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Texas"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"zipcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"77340"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"fees"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"ach"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.5</span><span class="p">,</span><span class="w">
          </span><span class="nl">"percentage"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"cards"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"american express"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"credit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.5</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"percentage"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
              </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"discover"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"credit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.5</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"percentage"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
              </span><span class="p">},</span><span class="w">
              </span><span class="nl">"debit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.5</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"percentage"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
              </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"mastercard"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"credit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.5</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"percentage"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
              </span><span class="p">},</span><span class="w">
              </span><span class="nl">"debit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.5</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"percentage"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
              </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"visa"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"credit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.5</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"percentage"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
              </span><span class="p">},</span><span class="w">
              </span><span class="nl">"debit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.5</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"percentage"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
              </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"amex"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"debit"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.5</span><span class="p">,</span><span class="w">
                  </span><span class="nl">"percentage"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
              </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>_id</code></td>
<td>ID of the company.</td>
</tr>
<tr>
<td><code>name</code></td>
<td>Name of the company.</td>
</tr>
<tr>
<td><code>status</code></td>
<td>The operational status of the company at any given moment of time. Possible values are <code>operational</code>, <code>maintenance</code>.</td>
</tr>
<tr>
<td><code>logo</code></td>
<td>Company logo object.</td>
</tr>
<tr>
<td><code>logo.url</code></td>
<td>URL of the company logo.</td>
</tr>
<tr>
<td><code>logo.background</code></td>
<td>If this is <code>true</code>, then the logo looks best as a background image.</td>
</tr>
<tr>
<td><code>logo.svg</code></td>
<td>Company logo svg object.</td>
</tr>
<tr>
<td><code>logo.svg.url</code></td>
<td>URL of the company svg logo.</td>
</tr>
<tr>
<td><code>logo.svg.color</code></td>
<td>Hex color of the company logo.</td>
</tr>
<tr>
<td><code>requiredPayment</code></td>
<td>If a specific payment method type is required by this company, this will be defined. Possible values are <code>bank</code>, <code>card</code>.</td>
</tr>
<tr>
<td><code>userPresenceRequired</code></td>
<td>If the company requires that the user is present to pass through any security flows. See best practices in the <a href="#connect">Connect</a> documentation.</td>
</tr>
<tr>
<td><code>schedule</code></td>
<td>The <a href="#bill-payment-schedule">bill payment schedule</a> this company follows. If this parameter is set, the schedule for a bill linked to this company may not be changed. Typically subscription companies such as Netflix have this parameter set since payments must be made on a specific date.</td>
</tr>
<tr>
<td><code>additionalPaymentOptions</code></td>
<td>Present when the company provides additional payment options that allow users to make payments towards their outstanding balance.</td>
</tr>
<tr>
<td><code>fees</code></td>
<td>The surcharge object. Possible child objects are <code>ach</code>, <code>cards</code></td>
</tr>
<tr>
<td><code>fees.ach</code></td>
<td>Present when the company applies surcharges to ACH payments.</td>
</tr>
<tr>
<td><code>fees.ach.percentage</code></td>
<td>If the ACH surcharge is a percentage of the payment amount.</td>
</tr>
<tr>
<td><code>fees.ach.rate</code></td>
<td>Either a dollar amount or a percentage amount.</td>
</tr>
<tr>
<td><code>fees.cards</code></td>
<td>Present when the company applies surcharges to card payments. Possible child objects are <code>american express</code>, <code>discover</code>, <code>mastercard</code>, and <code>visa</code>, referred to below as <code>{cardBrand}</code>. See example <code>company</code> response.</td>
</tr>
<tr>
<td><code>fees.cards.{cardBrand}</code></td>
<td>Possible child objects are <code>credit</code> or <code>debit</code>, referred to below as <code>{cardType}</code>.</td>
</tr>
<tr>
<td><code>fees.cards.{cardBrand}.{cardType}.percentage</code></td>
<td>If the surcharge is a percentage of the payment amount.</td>
</tr>
<tr>
<td><code>fees.cards.{cardBrand}.{cardType}.rate</code></td>
<td>Either a dollar amount or a percentage amount.</td>
</tr>
<tr>
<td><code>auth</code></td>
<td>Company auth fields.</td>
</tr>
<tr>
<td><code>auth.urls</code></td>
<td>Company Auth Urls (login URL is always available, but the others can by null).</td>
</tr>
<tr>
<td><code>auth.urls.login</code></td>
<td>Login URL.</td>
</tr>
<tr>
<td><code>auth.urls.signup</code></td>
<td>Signup URL.</td>
</tr>
<tr>
<td><code>auth.urls.forgotPassword</code></td>
<td>Forgot password URL.</td>
</tr>
<tr>
<td><code>auth.urls.forgotUsername</code></td>
<td>Forgot username URL.</td>
</tr>
<tr>
<td><code>auth.loginFields</code></td>
<td>Form fields for credentials.</td>
</tr>
<tr>
<td><code>auth.loginFields.placeholder</code></td>
<td>Input <code>placeholder</code> field.</td>
</tr>
<tr>
<td><code>auth.loginFields.formType</code></td>
<td>Input <code>type</code> field.</td>
</tr>
<tr>
<td><code>auth.loginFields.name</code></td>
<td>Input <code>name</code> field.</td>
</tr>
<tr>
<td><code>auth.loginFields.label</code></td>
<td>Label for <code>input</code>.</td>
</tr>
<tr>
<td><code>geo</code></td>
<td>Geo based location (not available for regional or national company).</td>
</tr>
<tr>
<td><code>geo.lat</code></td>
<td>Latitude coordinate.</td>
</tr>
<tr>
<td><code>geo.lng</code></td>
<td>Longitude coordinate.</td>
</tr>
<tr>
<td><code>geo.stateShort</code></td>
<td>Abbreviated state name.</td>
</tr>
<tr>
<td><code>geo.stateLong</code></td>
<td>Full state name.</td>
</tr>
<tr>
<td><code>geo.zipcode</code></td>
<td>Zipcode.</td>
</tr>
<tr>
<td><code>geo.address</code></td>
<td>Formatted address.</td>
</tr>
</tbody></table>
<h2 id='company-logos'>Company logos</h2>
<p>The Q2 Biller Direct API provides image URL&#39;s for each company&#39;s logo. For our most popular companies, we also provide a white svg logo, along with the hex color of the company&#39;s brand. There are three ideal ways of presenting these logos in your apps.</p>

<ol>
<li><p>When the <code>company.logo.svg</code> is available, the svg logo looks best on the <code>company.logo.svg.color</code> background.</p>

<p><img src="https://s3.amazonaws.com/app-assets.unbill.io-primary/assets/docs/netflix-svg-logo.png" alt="Netflix" /></p></li>
<li><p>When the <code>company.logo.svg</code> is not available and the <code>company.logo.background</code> field is set to <code>false</code>, the logo looks best on a white background.</p>

<p><img src="https://s3.amazonaws.com/app-assets.unbill.io-primary/assets/docs/twc-logo.png" alt="TWC" /></p></li>
<li><p>When the <code>company.logo.svg</code> is not available and the <code>company.logo.background</code> field is set to <code>true</code>, the logo looks best as a background image with the company name overlaid on top.</p>

<p><img src="https://s3.amazonaws.com/app-assets.unbill.io-primary/assets/docs/varsity-logo.png" alt="Varsity House" /></p></li>
</ol>
<h2 id='company-categories'>Company categories</h2>
<blockquote>
<p>Example Request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.q2open.io/v1/company/categories"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span> <span class="se">\</span>
  <span class="nt">-G</span>
</code></pre></div>
<blockquote>
<p>Example Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Electric"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"electric"</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retrieve a list of company categories you can use to search for companies by category <code>type</code>.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET https://api.q2open.io/v1/company/categories</code></p>
<h3 id='returns'>Returns</h3>
<p>A dictionary with a <code>data</code> property that contains an array of company categories.</p>
<h2 id='retrieve-a-company'>Retrieve a company</h2>
<blockquote>
<p>Example Request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.q2open.io/v1/company/566595c8ce88ccec69328566"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span> <span class="se">\</span>
  <span class="nt">-G</span>
</code></pre></div>
<blockquote>
<p>Example Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decea110719b1874d"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Netflix"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"operational"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"logo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/app-assets.unbill.io-primary/uploads/utility-provider-logos/7242937ba29042cce61a8e4745269fce.png"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"background"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"svg"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/app-assets.unbill.io-primary/uploads/utility-provider-logos/7242937ba29042cce61a8e4745269fce.svg"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"color"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FF041F"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"requiredPayment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bank"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"schedule"</span><span class="p">:</span><span class="w"> </span><span class="s2">"on-due-date"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"auth"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"urls"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.netflix.com/Login"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"signup"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.netflix.com"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"loginFields"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
      </span><span class="nl">"placeholder"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Username"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"formType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"username"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Username"</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"placeholder"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Password"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"formType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Password"</span><span class="w">
    </span><span class="p">}]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"geo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"lat"</span><span class="p">:</span><span class="w"> </span><span class="mf">30.70</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lng"</span><span class="p">:</span><span class="w"> </span><span class="mf">-95.53</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state_short"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TX"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"state_long"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Texas"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"zipcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"77340"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retrieves the company with the given ID.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET https://api.q2open.io/v1/company/{companyId}</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>companyId</code></td>
<td>ID of company to retrieve.</td>
</tr>
</tbody></table>
<h3 id='returns'>Returns</h3>
<p>Returns a <a href="#the-company-object">company object</a> if a valid <code>companyId</code> was provided. Returns an error otherwise.</p>
<h2 id='search-for-companies'>Search for companies</h2>
<blockquote>
<p>Example Requests</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.q2open.io/v1/company/search"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "query": "Netflix"
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.q2open.io/v1/company/search"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "category": "gas"
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.q2open.io/v1/company/search"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "geo": {
      "lat": 40.233845,
      "lng": -111.65852
    }
  }'</span>
</code></pre></div>
<blockquote>
<p>Example Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decea110719b1874d"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Netflix"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"operational"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"logo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/app-assets.unbill.io-primary/uploads/utility-provider-logos/7242937ba29042cce61a8e4745269fce.png"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"background"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"svg"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/app-assets.unbill.io-primary/uploads/utility-provider-logos/7242937ba29042cce61a8e4745269fce.svg"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"color"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FF041F"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"requiredPayment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bank"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"schedule"</span><span class="p">:</span><span class="w"> </span><span class="s2">"on-due-date"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"auth"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"urls"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.netflix.com/Login"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"signup"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.netflix.com"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"loginFields"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
          </span><span class="nl">"placeholder"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Username"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"formType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"username"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Username"</span><span class="w">
        </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"placeholder"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Password"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"formType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Password"</span><span class="w">
        </span><span class="p">}]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"geo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"lat"</span><span class="p">:</span><span class="w"> </span><span class="mf">30.70</span><span class="p">,</span><span class="w">
        </span><span class="nl">"lng"</span><span class="p">:</span><span class="w"> </span><span class="mf">-95.53</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state_short"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TX"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state_long"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Texas"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"zipcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"77340"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Search for companies by name, category, or nearby a geo coordinate.</p>

<p><img src="https://s3.amazonaws.com/app-assets.unbill.io-primary/assets/docs/company-categories.png" alt="Company Categories" /></p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://api.q2open.io/v1/company/search</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>query</code></td>
<td>The text string on which to search companies by name.</td>
</tr>
<tr>
<td><code>category</code></td>
<td>Category <code>type</code> retrieved from the <code>/company/categories</code> endpoint.</td>
</tr>
<tr>
<td><code>geo</code></td>
<td>Geo coordinates to search companies by location.</td>
</tr>
<tr>
<td><code>geo.lat</code></td>
<td>Latitude coordinate.</td>
</tr>
<tr>
<td><code>geo.lng</code></td>
<td>Longitude coordinate.</td>
</tr>
</tbody></table>
<h3 id='returns'>Returns</h3>
<p>A dictionary with a <code>data</code> property that contains an array of <a href="#the-company-object">company objects</a> that match the provided search filters.</p>
<h1 id='payment'>Payment</h1>
<p>In order to make payments towards a user&#39;s bill, they must first link a payment method using the <code>/payment</code> endpoint. By default, after a payment method is linked, payments will be made towards a user&#39;s bills on time. The API allows you to add and retrieve a user&#39;s payment method, as well as make payments towards a bill&#39;s outstanding balance and cancel a scheduled payment.</p>
<h2 id='the-card-object'>The card object</h2>
<blockquote>
<p>Example Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XXXX0005"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"american express"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credit"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-06-01T12:00:00.000Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>number</code></td>
<td>Masked card number.</td>
</tr>
<tr>
<td><code>brand</code></td>
<td>Card brand. Possible values are <code>visa</code>, <code>mastercard</code>, <code>american express</code>, etc.</td>
</tr>
<tr>
<td><code>type</code></td>
<td>Card type. Possible values are <code>credit</code>, <code>debit</code>.</td>
</tr>
<tr>
<td><code>expDate</code></td>
<td>Card expiration date.</td>
</tr>
</tbody></table>
<h2 id='the-bank-object'>The bank object</h2>
<blockquote>
<p>Example Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"routingNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XXXX0002"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XXXX0021"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"checking"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>routingNumber</code></td>
<td>Masked routing number.</td>
</tr>
<tr>
<td><code>accountNumber</code></td>
<td>Masked account number.</td>
</tr>
<tr>
<td><code>type</code></td>
<td>Bank account type. Possible values are <code>checking</code>, <code>savings</code>.</td>
</tr>
</tbody></table>
<h2 id='the-payment-method-object'>The payment method object</h2>
<blockquote>
<p>Example Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"580e3e11dec21e861b5a3719"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"optional_custom_identifier"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verified"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"card"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XXXX0005"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"american express"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credit"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"expDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-06-01T12:00:00.000Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"assignedBills"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"580e3e11dec21e861b5a3719"</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>_id</code></td>
<td>ID of the payment method.</td>
</tr>
<tr>
<td><code>type</code></td>
<td>The type of the payment method on file. Possible values are <code>card</code>, <code>bank</code>.</td>
</tr>
<tr>
<td><code>identifier</code></td>
<td>Optional custom identifier for external system correlation.</td>
</tr>
<tr>
<td><code>status</code></td>
<td>The status of the payment method on file. Possible values are <code>verified</code>, <code>declined</code>.</td>
</tr>
<tr>
<td><code>default</code></td>
<td>If this is the default payment method. Default means that it will pay any bills not specifically assigned a payment method.</td>
</tr>
<tr>
<td><code>assignedBills</code></td>
<td>A list of bill ID&#39;s this payment method was specifically assigned to.</td>
</tr>
<tr>
<td><code>card</code></td>
<td><a href="#the-card-object">Card object</a></td>
</tr>
<tr>
<td><code>bank</code></td>
<td><a href="#the-bank-object">Bank object</a></td>
</tr>
</tbody></table>
<h2 id='payment-status'>Payment status</h2>
<p>A payment method can have one of three statuses. Each type is documented below with a description of the status and a typical use case.</p>
<h3 id='verified'>verified</h3>
<p>The payment method on file is verified and eligible to make payments.</p>
<h3 id='declined'>declined</h3>
<p>The payment method on file is not eligible to make payments. This may happen for a number of reasons including:</p>

<ul>
<li>Insufficient funds</li>
<li>Expired card</li>
<li>Closed bank account</li>
</ul>

<p>When a user&#39;s payment method fails to pay a bill, we set their payment method status as <code>declined</code>. While their status is <code>declined</code> no bill payments will be made in behalf of the user. To address this issue, you may take one of the following courses of action:</p>

<ol>
<li>Link a new payment method via the <code>/payment</code> endpoint.</li>
<li>Retry the payment method via the <code>/payment/{paymentMethodId}/retry</code> endpoint.</li>
</ol>

<p><em>Declined payment prompt</em></p>

<p><img src="https://s3.amazonaws.com/app-assets.unbill.io-primary/assets/docs/failed-payment.png" alt="Failed Payment" /></p>

<p>If their payment method continues to be declined, it will be removed from their account. If the removed payment method was the default, the user will need to link a new payment method or choose another payment method on file as their default before bill payment services resume.</p>
<h2 id='add-a-payment-method'>Add a payment method</h2>
<blockquote>
<p>Example Card Request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.q2open.io/v1/payment"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "clientId": "56e1ddbd1a05319bc198d36f",
    "paymentType": "card",
    "identifier": "optional_custom_identifier",
    "cardNumber": "378282246310005",
    "cardCode": "218",
    "expMonth": "10",
    "expYear": "2017",
    "zipcode": "12345",
    "name": "Sean Hill",
    "setAsDefault": true
  }'</span>
</code></pre></div>
<blockquote>
<p>Example Bank Request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.q2open.io/v1/payment"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "clientId": "56e1ddbd1a05319bc198d36f",
    "paymentType": "bank",
    "identifier": "optional_custom_identifier",
    "routingNumber": "021000021",
    "accountNumber": "9900000002",
    "accountType": "checking",
    "name": "Sean Hill"
  }'</span>
</code></pre></div>
<blockquote>
<p>Example Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"paymentMethodId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56e1ddbd1a05319bc198d36f"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Add a payment method to a user.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://api.q2open.io/v1/payment</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>clientId</code></td>
<td>ID of the client to add a payment method to.</td>
</tr>
<tr>
<td><code>paymentType</code></td>
<td>Type of payment. Possible values are <code>card</code>, <code>bank</code>.</td>
</tr>
<tr>
<td><code>identifier</code></td>
<td>Optional custom identifier for external system correlation.</td>
</tr>
<tr>
<td><code>cardNumber</code></td>
<td>Credit card number.</td>
</tr>
<tr>
<td><code>cardCode</code></td>
<td>Credit card CVV.</td>
</tr>
<tr>
<td><code>expMonth</code></td>
<td>Credit card expiration month formatted as <code>XX</code>.</td>
</tr>
<tr>
<td><code>expYear</code></td>
<td>Credit card expiration year formatted as <code>XXXX</code>.</td>
</tr>
<tr>
<td><code>zipcode</code></td>
<td>Credit card zipcode.</td>
</tr>
<tr>
<td><code>name</code></td>
<td>The name as it appears on the payment account.</td>
</tr>
<tr>
<td><code>routingNumber</code></td>
<td>Bank routing number.</td>
</tr>
<tr>
<td><code>accountNumber</code></td>
<td>Bank account number.</td>
</tr>
<tr>
<td><code>accountType</code></td>
<td>Type of bank account. Possible values are <code>checking</code>, <code>savings</code>.</td>
</tr>
<tr>
<td><code>setAsDefault</code></td>
<td>Set this payment method as the default.</td>
</tr>
</tbody></table>
<h3 id='returns'>Returns</h3>
<p>Returns an object with a <code>paymentMethodId</code> property if the payment method was successfully added. Returns an error otherwise.</p>
<h2 id='list-all-payment-methods'>List all payment methods</h2>
<blockquote>
<p>Example Request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.q2open.io/v1/payment/list/566595c8ce88ccec69328566"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span> <span class="se">\</span>
  <span class="nt">-G</span>
</code></pre></div>
<blockquote>
<p>Example Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"580e3754dec21e861b5a3718"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"optional_custom_identifier"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verified"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sean Hill"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"card"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XXXX4242"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"visa"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credit"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"expDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-12-01T12:00:00.000Z"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"580e3e11dec21e861b5a3719"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bank"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"optional_custom_identifier"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"declined"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sean Hill"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bank"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"routing"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XXXX2531"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"account"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XXXX4124"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"checking"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retrieve a list of payment methods on file for a client.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET https://api.q2open.io/v1/payment/list/{clientId}</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>clientId</code></td>
<td>ID of client to retrieve payment methods for.</td>
</tr>
</tbody></table>
<h3 id='returns'>Returns</h3>
<p>A dictionary with a <code>data</code> property that contains an array of <a href="#the-payment-method-object">payment method objects</a>.</p>
<h2 id='delete-payment-method'>Delete payment method</h2>
<blockquote>
<p>Example Request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.q2open.io/v1/payment/566595c8ce88ccec69328566"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span> <span class="se">\</span>
  <span class="nt">-X</span> DELETE
</code></pre></div>
<blockquote>
<p>Example Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Delete a payment method on file for bill payments. If a payment was made within the last 24 hours with this payment method, an error will be returned. Q2 requires a 24 hour time span after a payment has been made before a payment method can be deleted.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>DELETE https://api.q2open.io/v1/payment/{paymentMethodId}</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>paymentMethodId</code></td>
<td>ID of payment method to delete.</td>
</tr>
</tbody></table>
<h3 id='returns'>Returns</h3>
<p>Returns an object with a <code>success</code> property if the payment method was deleted. Returns an error otherwise.</p>
<h2 id='retry-payment-method'>Retry payment method</h2>
<blockquote>
<p>Sample Request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.q2open.io/v1/payment/566595c8ce88ccec69328566/retry"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span> <span class="se">\</span>
  <span class="nt">-X</span> POST
</code></pre></div>
<blockquote>
<p>Example Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retry a <code>declined</code> payment method on file for bill payments.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://api.q2open.io/v1/payment/{paymentMethodId}/retry</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>paymentMethodId</code></td>
<td>ID of payment method to retry.</td>
</tr>
</tbody></table>
<h3 id='returns'>Returns</h3>
<p>Returns an object with a <code>success</code> property if the payment method will be retried. Returns an error otherwise.</p>
<h2 id='assign-payment-method'>Assign payment method</h2>
<blockquote>
<p>Example Request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.q2open.io/v1/payment/566595c8ce88ccec69328566/assign"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "billId": "566595c8ce88ccec69328566",
  }'</span>
  <span class="nt">-X</span> POST
</code></pre></div>
<blockquote>
<p>Example Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Assign a linked payment method to pay a specific bill. This is required when a company&#39;s <code>requiredPayment</code> is defined as <code>card</code> or <code>bank</code>.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://api.q2open.io/v1/payment/{paymentMethodId}/assign</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>paymentMethodId</code></td>
<td>ID of payment method to assign.</td>
</tr>
<tr>
<td><code>billId</code></td>
<td>ID of bill to assign payment method to.</td>
</tr>
</tbody></table>
<h3 id='returns'>Returns</h3>
<p>Returns an object with a <code>success</code> property if the payment method was assigned. Returns an error otherwise.</p>
<h2 id='update-payment-settings'>Update payment settings</h2>
<blockquote>
<p>Example Request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.q2open.io/v1/payment/settings"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "billId": "566595c8ce88ccec69328566",
    "recurring": "enabled",
    "schedule": "five-days-before"
  }'</span>
  <span class="nt">-X</span> POST
</code></pre></div>
<blockquote>
<p>Example Response</p>
</blockquote>

<p>Update payment settings for a bill.</p>

<p>Some subscription companies, such as Netflix, Hulu, and Spotify require recurring payments to be enabled. If a request to the <code>/payment/settings</code> endpoint is made for one of these companies, an error will be returned and recurring payments will not be disabled.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://api.q2open.io/v1/payment/settings</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>billId</code></td>
<td>ID of bill to update payment settings for.</td>
</tr>
<tr>
<td><code>recurring</code></td>
<td>Whether recurring payments should be <code>enabled</code> or <code>disabled</code>.</td>
</tr>
<tr>
<td><code>schedule</code></td>
<td>The <a href="#bill-payment-schedule">bill payment schedule</a> for payments</td>
</tr>
</tbody></table>
<h3 id='returns'>Returns</h3>
<p>Returns an object with a <code>success</code> property if payment settings were successfully updated. Returns an error otherwise.</p>
<h2 id='schedule-payment'>Schedule payment</h2>
<blockquote>
<p>Example Request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.q2open.io/v1/payment/schedule"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "billId": "566595c8ce88ccec69328566",
    "payDate": "2018-10-25T00:00:00.000Z"
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"apiKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"billId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"566595c8ce88ccec69328566"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-10-25T00:00:00.000Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Example Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Schedule an on-demand payment towards a bill&#39;s outstanding balance.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://api.q2open.io/v1/payment/schedule</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>billId</code></td>
<td>ID of bill to schedule payment for.</td>
</tr>
<tr>
<td><code>date</code><br><small class="opt">(optional)</small></td>
<td>An <code>ISO 8601</code> formatted date that sets what day this bill will be paid. If no <code>date</code> is specified, the bill is scheduled to be paid immediately.</td>
</tr>
</tbody></table>
<h3 id='returns'>Returns</h3>
<p>Returns an object with a <code>success</code> property if a payment was scheduled. Returns an error otherwise.</p>
<h2 id='cancel-payment'>Cancel payment</h2>
<blockquote>
<p>Example Request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.q2open.io/v1/payment/cancel"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "billId": "566595c8ce88ccec69328566",
  }'</span>
</code></pre></div><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"billId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"566595c8ce88ccec69328566"</span><span class="p">,</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Example Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Cancel a scheduled payment for a bill.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://api.q2open.io/v1/payment/cancel</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>billId</code></td>
<td>ID of bill to cancel payment for.</td>
</tr>
</tbody></table>
<h3 id='returns'>Returns</h3>
<p>Returns an object with a <code>success</code> property if the payment was canceled. Returns an error otherwise.</p>
<h1 id='client'>Client</h1>
<p>To authenticate and interact with the endpoints on behalf of a given user, a <code>clientId</code> is required.</p>
<h2 id='create-client'>Create Client</h2>
<blockquote>
<p>Example Request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.q2open.io/v1/client"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "identifier": "Bk0zwVx1Z",
    "meta": {
      "firstName": "Demo",
      "lastName": "User",
      "email": "demo@demo.com",
      "phone": "123-123-1234",
      "address1": "123 Api St.",
      "address2": "P.O. Box 283",
      "city": "Demo",
      "state": "Q2",
      "zipcode": "12345"
    }
  }'</span>
</code></pre></div>
<blockquote>
<p>Example Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"clientId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa11012711875d"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Creates or returns an existing client to be used with requests.</p>

<p>If a client already exists with the same <code>identifier</code> included in the request, the existing <code>clientId</code> is returned.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://api.q2open.io/v1/client</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>identifier</code></td>
<td>A unique identifier that represents a user in your system.</td>
</tr>
<tr>
<td><code>meta</code></td>
<td>Additional information about the user in your system.</td>
</tr>
</tbody></table>
<h3 id='returns'>Returns</h3>
<p>Returns an object with a <code>clientId</code> property that can be used for requests.</p>
<h2 id='create-token'>Create Token</h2>
<blockquote>
<p>Example Request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.q2open.io/v1/client/create-token"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "identifier": "Bk0zwVx1Z",
    "accessTokenExpiresIn": 3600
  }'</span>
</code></pre></div>
<blockquote>
<p>Example Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"566595c8ce88ccec69328566c8ce8595c8"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Create a token to be used for SSO into applications.</p>

<p>When creating subsequent tokens for an existing <code>client</code>, be sure to use the same <code>identifier</code> value. If a client already exists with this <code>identifier</code>, then any actions taken within the context of a <a href="#products">Product</a>. will be linked to that client.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://api.q2open.io/v1/client/create-token</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>identifier</code></td>
<td>A unique identifier that represents a user in your system.</td>
</tr>
<tr>
<td><code>nonce</code></td>
<td>Optional boolean specifying whether the token is for one time use. Default is false.</td>
</tr>
<tr>
<td><code>expiration</code></td>
<td>An <code>ISO 8601</code> formatted date that sets when this token will expire. If no <code>expiration</code> is specified, the token will expire after 24 hours.</td>
</tr>
<tr>
<td><code>accessTokenExpiresIn</code></td>
<td>Optional number of seconds that an access token issued using the SSO token is valid. Default is 1 hour (3600).</td>
</tr>
</tbody></table>
<h3 id='returns'>Returns</h3>
<p>Returns an object with a <code>token</code> property that can be used to SSO into applications.</p>
<h2 id='revoke-tokens'>Revoke Tokens</h2>
<blockquote>
<p>Example Request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.q2open.io/v1/client/revoke-tokens"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "identifier": "Bk0zwVx1Z",
    "clientToken": "566595c8ce88ccec69328566c8ce8595c8"
  }'</span>
</code></pre></div>
<blockquote>
<p>Example Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Revokes client SSO and access tokens associated with either a client or client SSO token.
When a token is revoked, it can no longer be used to access the Biller Direct API.</p>

<p>Either a client <code>identifier</code> or <code>clientToken</code> must be provided.
If a client <code>identifier</code> is provided, all current SSO and access tokens associated with that client will be revoked.
If a <code>clientToken</code> from <a href="#create-token">Create Token</a> is provided, that token and any related access tokens will be revoked.
If both parameters are passed, the <code>clientToken</code> parameter is ignored.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://api.q2open.io/v1/client/revoke-tokens</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>identifier</code></td>
<td>Optional A unique identifier that represents a user in your system.</td>
</tr>
<tr>
<td><code>clientToken</code></td>
<td>Optional The client SSO token produced by a call to <a href="#create-token">Create Token</a>.</td>
</tr>
</tbody></table>
<h3 id='returns'>Returns</h3>
<p>Returns an object with a <code>success</code> property.</p>
<h2 id='sync-client'>Sync Client</h2>
<blockquote>
<p>Example Request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.q2open.io/v1/client"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "client": {
      "identifier": "Bk0zwVx1Z",
      "meta": {
        "firstName": "Demo",
        "lastName": "User",
        "email": "demo@demo.com",
        "phone": "123-123-1234",
        "address1": "123 Api St.",
        "address2": "P.O. Box 283",
        "city": "Demo",
        "state": "Q2",
        "zipcode": "12345"
      }
    },
    "token": {
      "expiration": "2025-01-30T00:00:00.000Z"
    },
    "cards": [{
      "identifier": "fiId123",
      "cardNumber": "4111111111111111",
      "cardCode": "123",
      "cardType": "credit",
      "cardBrand": "visa",
      "expMonth": "02",
      "expYear": "2040",
      "zipcode": "12345",
      "name": "Sean Hill"
    }]
  }'</span>
</code></pre></div>
<blockquote>
<p>Example Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"clientId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa11012711875d"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ssoToken"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWJqZWN0IjoiNWYwMzY1YTdhZjkyODg5NjhiNTNiM2QzIiwiaWF0IjoxNTk0MDU4OTQ1LCJleHAiOjE1OTQxNDUzNDUsImlzcyI6IlBBWUJJREVUIiwic3ViIjoiNWYwMzY1YTdhZjkyODg5NjhiNTNiM2QzIn0.kO_x9cZRlhI4dyGarOPI1w2gW2QI-ObqyKFdXKs64Ek"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"cards"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="nl">"paymentMethodId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55942f330cfcfd6c4ed529d9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fiId123"</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Syncs client data and card information by combining the <a href="#create-client">create client</a>, <a href="#create-token">create token</a>, and <a href="#add-a-payment-method">add payment method</a> calls.</p>

<p>If a client already exists with the same <code>identifier</code> included in the request, the existing <code>clientId</code> is returned.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://api.q2open.io/v1/client/sync</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>client</code></td>
<td>The object used from the <a href="#create-client">create client</a> call.</td>
</tr>
<tr>
<td><code>token</code></td>
<td>The object used from the <a href="#create-token">create token</a> call.</td>
</tr>
<tr>
<td><code>cards</code></td>
<td>A list of cards to be added to the client, as specified in the <a href="#add-a-payment-method">add payment method</a> call. You can specify the <code>cardType</code> and <code>cardBrand</code> parameters for a much faster call speed. Possible values for <code>cardType</code> are <code>credit</code>, <code>debit</code>. Possible values for <code>cardBrand</code> are <code>american express</code>, <code>discover</code>, <code>maestro</code>, <code>mastercard</code>, <code>uatp</code>, <code>visa</code>.</td>
</tr>
</tbody></table>
<h3 id='returns'>Returns</h3>
<p>Returns an object with a <code>clientId</code> property that can be used for requests, an <code>ssoToken</code> that can be used with <a href="#products">white-label</a> products, and a <code>cards</code> array that includes a list of objects that include the <code>paymentMethodId</code> of the created card and <code>identifier</code> passed in.</p>
<h1 id='swap'>Swap</h1>
<p>Enables account holders to automatically apply new debit or credit card information across their favorite subscription and digital point-of-sale services.</p>
<h2 id='the-swap-object'>The swap object</h2>
<blockquote>
<p>Example Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b4cdadf8ea75a6602ff82bb"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"completed"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"auth"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b4cdade36c0c10108a57405"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verified"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5522f59264f5785929aa1c42"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hulu"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"operational"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"logo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/app-assets.unbill.io-primary/uploads/utility-provider-logos/a3c89f48378c84713fb31ce0e97bfa15.png"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"background"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"paymentMethod"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b296e67a15d4e0001174fc2"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sean Hill"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verified"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"card"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XXXX7989"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"bin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"41474002"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"visa"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credit"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"expDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-06-01T12:00:00.000Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div>
<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>_id</code></td>
<td>ID of the swap. Unavailable when the <code>status.type</code> is <code>pending</code>.</td>
</tr>
<tr>
<td><code>status</code></td>
<td><a href="#swap-status">Status</a> of the swap.</td>
</tr>
<tr>
<td><code>auth</code></td>
<td><a href="#the-auth-object">Auth object</a> related to the swap.</td>
</tr>
<tr>
<td><code>company</code></td>
<td><a href="#the-company-object">Company object</a> related to the swap.</td>
</tr>
<tr>
<td><code>paymentMethod</code></td>
<td><a href="#the-payment-method-object">Payment method object</a> to be swapped in.</td>
</tr>
</tbody></table>
<h2 id='swap-status'>Swap status</h2>
<blockquote>
<p>In Progress Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"in-progress"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Hold Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hold"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Completed Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"completed"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>A swap <code>status.type</code> indicates the current state of a request to swap a payment method with a particular company.</p>
<h3 id='in-progress'>in-progress</h3>
<p>The swap of the payment method is currently in progress.</p>
<h3 id='hold'>hold</h3>
<p>The swap of the payment method is currently on hold as described in the <a href="#auth-status">Auth Status</a>.</p>
<h3 id='completed'>completed</h3>
<p>The swap of the payment method has been completed successfully.</p>
<h2 id='add-a-swap'>Add a swap</h2>
<blockquote>
<p>Example Request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.q2open.io/v1/swap"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "authId": "566595c8ce88ccec69328566",
    "paymentMethodId": "5b4cdade36c0c10108a57405"
  }'</span>
</code></pre></div><h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://api.q2open.io/v1/swap</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>authId</code></td>
<td>ID of auth to create a swap for.</td>
</tr>
<tr>
<td><code>paymentMethodId</code></td>
<td>ID of payment method to link to the swap.</td>
</tr>
</tbody></table>
<h3 id='returns'>Returns</h3>
<p>Returns an object with a <code>success</code> property if the swap was created. Returns an error otherwise.</p>
<h2 id='company-list'>Company list</h2>
<blockquote>
<p>Example Request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.q2open.io/v1/swap/companies"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span> <span class="se">\</span>
  <span class="nt">-G</span>
</code></pre></div>
<blockquote>
<p>Example Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decea110719b1874d"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Netflix"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"logo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/app-assets.unbill.io-primary/uploads/utility-provider-logos/7242937ba29042cce61a8e4745269fce.png"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"background"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"svg"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/app-assets.unbill.io-primary/uploads/utility-provider-logos/7242937ba29042cce61a8e4745269fce.svg"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"color"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FF041F"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"requiredPayment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bank"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"schedule"</span><span class="p">:</span><span class="w"> </span><span class="s2">"on-due-date"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"auth"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"urls"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.netflix.com/Login"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"signup"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.netflix.com"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"loginFields"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
          </span><span class="nl">"placeholder"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Username"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"formType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"username"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Username"</span><span class="w">
        </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"placeholder"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Password"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"formType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Password"</span><span class="w">
        </span><span class="p">}]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"geo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"lat"</span><span class="p">:</span><span class="w"> </span><span class="mf">30.70</span><span class="p">,</span><span class="w">
        </span><span class="nl">"lng"</span><span class="p">:</span><span class="w"> </span><span class="mf">-95.53</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state_short"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TX"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state_long"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Texas"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"zipcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"77340"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retrieve a list of companies that support swaps.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET https://api.q2open.io/v1/swap/companies</code></p>
<h3 id='returns'>Returns</h3>
<p>A dictionary with a <code>data</code> property that contains an array of <a href="#the-company-object">company objects</a> that support swaps.</p>
<h2 id='list-all-swaps'>List all swaps</h2>
<blockquote>
<p>Example Request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.q2open.io/v1/swap/list/566595c8ce88ccec69328566"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span> <span class="se">\</span>
  <span class="nt">-G</span>
</code></pre></div>
<blockquote>
<p>Example Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b4cdadf8ea75a6602ff82bb"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"completed"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"auth"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b4cdade36c0c10108a57405"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verified"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5522f59264f5785929aa1c42"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hulu"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"operational"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"logo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/app-assets.unbill.io-primary/uploads/utility-provider-logos/a3c89f48378c84713fb31ce0e97bfa15.png"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"background"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"paymentMethod"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b296e67a15d4e0001174fc2"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sean Hill"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verified"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"card"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XXXX7989"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"bin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"41474002"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"visa"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credit"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"expDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-06-01T12:00:00.000Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retrieves a list of client&#39;s swaps.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET https://api.q2open.io/v1/swap/list/{clientId}</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>clientId</code></td>
<td>ID of client to retrieve swaps for.</td>
</tr>
</tbody></table>
<h3 id='returns'>Returns</h3>
<p>A dictionary with a <code>data</code> property that contains an array of <a href="#the-swap-object">swap objects</a>.</p>
<h1 id='partner'>Partner</h1>
<p>Partner API endpoints allow partner-specific information to be retrieved.</p>
<h2 id='get-public-keys'>Get public keys</h2>
<blockquote>
<p>Example Request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.q2open.io/v1/partner/public-keys"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span> <span class="se">\</span>
  <span class="nt">-G</span>
</code></pre></div>
<blockquote>
<p>Example Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"keys"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"kty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RSA"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"n"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yn8Ek5WFlw0YIsXpjqC7_MCN4OfUAUVp3tje..."</span><span class="p">,</span><span class="w">
      </span><span class="nl">"e"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AQAB"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"use"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enc"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"kid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b4cdadf8ea75a6602ff82bb"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"x5c"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MIIFczCCBFugAwIBAgISBB/csS+OpHRTGG..."</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"kty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RSA"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"n"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yn8Ek5WFlw0YIsXpjqC7_MCN4OfUAUVp33ds..."</span><span class="p">,</span><span class="w">
      </span><span class="nl">"e"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AQAB"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"use"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enc"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"kid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b4cdadf8ea75a6602ff82bc"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"x5c"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MIIFczCCBFugAwIBAgISBB/csS+OpHRTGG..."</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retrieves an array of active public keys from the current partner for request encryption.
Partner keys are managed in the Nexus application.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET https://api.q2open.io/v1/partner/public-keys</code></p>
<h3 id='returns'>Returns</h3>
<p>A response with a <code>keys</code> array that contains active partner public keys in JWK Set format.</p>
<h2 id='get-specific-public-key'>Get specific public key</h2>
<blockquote>
<p>Example Request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.q2open.io/v1/partner/public-keys/{keyId}"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span> <span class="se">\</span>
  <span class="nt">-G</span>
</code></pre></div>
<blockquote>
<p>Example Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"kty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RSA"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"n"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yn8Ek5WFlw0YIsXpjqC7_MCN4OfUAUVp3tje..."</span><span class="p">,</span><span class="w">
  </span><span class="nl">"e"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AQAB"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"use"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enc"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"kid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b4cdadf8ea75a6602ff82bb"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"x5c"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MIIFczCCBFugAwIBAgISBB/csS+OpHRTGG..."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retrieves a specific public key from the current partner for request encryption.
Partner keys are managed in the Nexus application.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET https://api.q2open.io/v1/partner/public-keys/{keyId}</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>keyId</code></td>
<td>ID of the key to retrieve.</td>
</tr>
</tbody></table>
<h3 id='returns'>Returns</h3>
<p>A response with the latest public key content in JWK format.</p>
<h2 id='get-latest-public-key'>Get latest public key</h2>
<blockquote>
<p>Example Request</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.q2open.io/v1/partner/public-keys/latest"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: Bearer dc220490-e6ee-11e5-8a94-e7385a8d929e"</span> <span class="se">\</span>
  <span class="nt">-G</span>
</code></pre></div>
<blockquote>
<p>Example Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"kty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RSA"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"n"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yn8Ek5WFlw0YIsXpjqC7_MCN4OfUAUVp3tje..."</span><span class="p">,</span><span class="w">
  </span><span class="nl">"e"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AQAB"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"use"</span><span class="p">:</span><span class="w"> </span><span class="s2">"enc"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"kid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b4cdadf8ea75a6602ff82bb"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"x5c"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MIIFczCCBFugAwIBAgISBB/csS+OpHRTGG..."</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Retrieves the latest public key from the current partner for request encryption.
Partner keys are managed in the Nexus application.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET https://api.q2open.io/v1/partner/public-keys/latest</code></p>
<h3 id='returns'>Returns</h3>
<p>A response with the latest public key content in JWK format.</p>
<h1 id='events'>Events</h1>
<p>Events are our way of letting you know when something interesting happens on behalf of your users.
When an interesting event occurs, we create a new <code>Event</code> object. For example, when a new bill is received, we create a <code>bill.update</code> event; when a bill payment is sent, we create a <code>bill.payment</code> event.</p>

<p>We have a system for sending the event objects directly to an endpoint on your server, called <a href="http://en.wikipedia.org/wiki/Webhook">webhooks</a>. Webhooks are managed in Nexus.</p>
<h2 id='the-event-object'>The event object</h2>
<blockquote>
<p>Example Response</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"580e3e11dec21e861b5a3719"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill.update"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-04-20T16:51:12Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"clientId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa110127118752"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"sessionId"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"your-session-id-if-supplied-12345"</span><span class="w">
  </span><span class="nl">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-id-123"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"partnerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55942f330cfcfd6c4ed529d9"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa11012711875d"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"25.21"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"current"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"52.11"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>_id</code></td>
<td>ID of the event.</td>
</tr>
<tr>
<td><code>type</code></td>
<td>Description of the event: e.g. <code>bill.issued</code>, <code>bill.updated</code>, etc.</td>
</tr>
<tr>
<td><code>clientId</code></td>
<td>The <code>id</code> of the <code>client</code> to which the event pertains.</td>
</tr>
<tr>
<td><code>partnerId</code></td>
<td>The <code>id</code> of the <code>partner</code> to which the event pertains.</td>
</tr>
<tr>
<td><code>sessionId</code></td>
<td>Your internal identifier associated with the client session as described in <a href="#sessions">Sessions</a>.</td>
</tr>
<tr>
<td><code>identifier</code></td>
<td>Your internal <code>identifier</code> associated with the <code>client</code>.</td>
</tr>
<tr>
<td><code>created</code></td>
<td>An <code>ISO 8601</code> formatted date of when this event was created.</td>
</tr>
<tr>
<td><code>payload</code></td>
<td>Object containing data associated with the event..</td>
</tr>
<tr>
<td><code>payload.resource</code></td>
<td>Object containing data associated with the resource of the event.</td>
</tr>
<tr>
<td><code>payload.resource.id</code></td>
<td>ID of the resource associated with the event.</td>
</tr>
<tr>
<td><code>payload.resource.type</code></td>
<td>The type of resource associated with the event. Possible values are <code>bill</code>.</td>
</tr>
<tr>
<td><code>payload.data</code></td>
<td>Object containing unique attributes per <code>type</code> as described in <a href="#types-of-events">types of events</a>.</td>
</tr>
</tbody></table>
<h2 id='types-of-events'>Types of events</h2>
<p>This is a list of all the types of events we currently send. We may add more at any time, so you shouldn&#39;t rely on only these types existing in your code.</p>

<p>You&#39;ll notice that these events follow a pattern: <code>resource.event</code>. Our goal is to design a consistent system that makes things easier to anticipate and code against.</p>

<p>Each event object includes a <code>payload.data</code> property which contains unique values for each <code>type</code> of event. Each event type below describes these unique values.</p>
<h2 id='auth-success'>Auth success</h2>
<blockquote>
<p>Example <code>auth.success</code> Event</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"580e3e11dec21e861b5a3719"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auth.success"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-04-20T16:51:12Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"clientId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa110127118752"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"partnerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55942f330cfcfd6c4ed529d9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-id-123"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"client"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa110127118752"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"auth"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"5b157888cb7e60000bfcaa41"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"items"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"bill"</span><span class="w">
          </span><span class="p">],</span><span class="w">
          </span><span class="nl">"company"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"55942f330cfcfd6c4ed529d8"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Geico"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"status"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"verified"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>When a client has successfully completed the authentication process.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>type</code></td>
<td><code>auth.success</code></td>
</tr>
<tr>
<td><code>payload.resource.id</code></td>
<td>The ID of the client who was authenticating.</td>
</tr>
<tr>
<td><code>payload.resource.type</code></td>
<td>The type of resource referred to by the resource.id. Value: <code>client</code>.</td>
</tr>
<tr>
<td><code>payload.data.auth</code></td>
<td>The <a href="#the-auth-object">auth object</a> linked to this resource.</td>
</tr>
</tbody></table>
<h2 id='auth-invalid'>Auth invalid</h2>
<blockquote>
<p>Example <code>auth.invalid</code> Event</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"580e3e11dec21e861b5a3719"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auth.invalid"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-04-20T16:51:12Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"clientId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa110127118752"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"partnerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55942f330cfcfd6c4ed529d9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-id-123"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auth"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa11012711875d"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"company"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"55942f330cfcfd6c4ed529d8"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Geico"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>When the auth&#39;s credentials are no longer valid and need to be reauthenticated.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>type</code></td>
<td><code>auth.invalid</code></td>
</tr>
<tr>
<td><code>payload.resource.id</code></td>
<td>The ID of the auth that needs to be reauthenticated.</td>
</tr>
<tr>
<td><code>payload.resource.type</code></td>
<td>The type of resource referred to by the resource.id. Value: <code>auth</code>.</td>
</tr>
<tr>
<td><code>payload.data.company</code></td>
<td>The <a href="#the-company-object">company object</a> linked to this resource.</td>
</tr>
</tbody></table>
<h2 id='auth-deleted'>Auth deleted</h2>
<blockquote>
<p>Example <code>auth.deleted</code> Event</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"580e3e11dec21e861b5a3719"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auth.deleted"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-04-20T16:51:12Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"clientId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa110127118752"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"partnerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55942f330cfcfd6c4ed529d9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-id-123"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auth"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa110127118752"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"company"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"55942f330cfcfd6c4ed529d8"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Geico"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>When a client deletes an auth.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>type</code></td>
<td><code>auth.deleted</code></td>
</tr>
<tr>
<td><code>payload.resource.id</code></td>
<td>The ID of the auth that was deleted.</td>
</tr>
<tr>
<td><code>payload.resource.type</code></td>
<td>The type of resource referred to by the resource.id. Value: <code>auth</code>.</td>
</tr>
<tr>
<td><code>payload.data.company</code></td>
<td>The <a href="#the-company-object">company object</a> linked to this resource.</td>
</tr>
</tbody></table>
<h2 id='auth-hold'>Auth hold</h2>
<blockquote>
<p>Example <code>auth.hold</code> Event</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"580e3e11dec21e861b5a3719"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auth.hold"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-04-20T16:51:12Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"clientId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa110127118752"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"partnerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55942f330cfcfd6c4ed529d9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-id-123"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auth"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa11012711875d"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"hold"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"code"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"account_issue_no_service_account"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"text"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Please login and add your service account."</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"company"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"55942f330cfcfd6c4ed529d8"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Geico"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>When an auth receives a hold that prevents access to the account data.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>type</code></td>
<td><code>auth.hold</code></td>
</tr>
<tr>
<td><code>payload.resource.id</code></td>
<td>The ID of the auth that was put on hold.</td>
</tr>
<tr>
<td><code>payload.resource.type</code></td>
<td>The type of resource referred to by the resource.id. Value: <code>auth</code>.</td>
</tr>
<tr>
<td><code>payload.data.hold</code></td>
<td>The hold placed on the account.</td>
</tr>
<tr>
<td><code>payload.data.company</code></td>
<td>The <a href="#the-company-object">company object</a> linked to this resource.</td>
</tr>
</tbody></table>
<h2 id='auth-needs-resync'>Auth needs resync</h2>
<blockquote>
<p>Example <code>auth.needs-resync</code> Event</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"580e3e11dec21e861b5a3719"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auth.needs-resync"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-04-20T16:51:12Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"clientId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa110127118752"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"partnerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55942f330cfcfd6c4ed529d9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-id-123"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"auth"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa110127118752"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"company"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"55942f330cfcfd6c4ed529d8"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Geico"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>When an auth requires the client to re-verify credentials.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>type</code></td>
<td><code>auth.needs-resync</code></td>
</tr>
<tr>
<td><code>payload.resource.id</code></td>
<td>The ID of the auth that needs to be resynced.</td>
</tr>
<tr>
<td><code>payload.resource.type</code></td>
<td>The type of resource referred to by the resource.id. Value: <code>auth</code>.</td>
</tr>
<tr>
<td><code>payload.data.company</code></td>
<td>The <a href="#the-company-object">company object</a> linked to this resource.</td>
</tr>
</tbody></table>
<h2 id='bill-created'>Bill created</h2>
<blockquote>
<p>Example <code>bill.created</code> Event</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"580e3e11dec21e861b5a3719"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill.created"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-04-20T16:51:12Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"clientId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa110127118752"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"partnerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55942f330cfcfd6c4ed529d9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-id-123"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa11012711875d"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"auth"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decea110719b1874d"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verified"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decea110719b1874d"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XYZ Electric"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"logo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/app-assets.unbill.io-primary/uploads/utility-provider-logos/7242937ba29042cce61a8e4745269fce.png"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"background"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>When a bill is found on an associated auth.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>type</code></td>
<td><code>bill.created</code></td>
</tr>
<tr>
<td><code>payload.data.auth</code></td>
<td>The <a href="#the-auth-object">auth object</a> linked to the bill.</td>
</tr>
</tbody></table>
<h2 id='bill-upcoming'>Bill upcoming</h2>
<blockquote>
<p>Example <code>bill.upcoming</code> Event</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"580e3e11dec21e861b5a3719"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill.upcoming"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-04-20T16:51:12Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"clientId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa110127118752"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"partnerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55942f330cfcfd6c4ed529d9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-id-123"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa11012711875d"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Netflix"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"bill"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="s2">"52.11"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"dueDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-28 17:00:00.000"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>When an upcoming bill is due in the next two days.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>type</code></td>
<td><code>bill.upcoming</code></td>
</tr>
<tr>
<td><code>payload.data.company</code></td>
<td>The <a href="#the-company-object">company object</a> linked to this resource.</td>
</tr>
<tr>
<td><code>payload.data.bill</code></td>
<td>Object containing the current bill balance and due date.</td>
</tr>
</tbody></table>
<h2 id='bill-update'>Bill update</h2>
<blockquote>
<p>Example <code>bill.update</code> Event</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"580e3e11dec21e861b5a3719"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill.update"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-04-20T16:51:12Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"clientId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa110127118752"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"partnerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55942f330cfcfd6c4ed529d9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-id-123"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa11012711875d"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Netflix"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"bill"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"balance"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="s2">"25.21"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"current"</span><span class="p">:</span><span class="w"> </span><span class="s2">"52.11"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"dueDate"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"current"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-28 17:00:00.000"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>When a bill&#39;s outstanding balance changes. Note that the <code>payload.data.previous</code> value may not always be available. For instance, when the system first aggregates bill data, the previous bill balance may not have been known. Also note that when the <code>payload.data.previous.balance</code> is <code>0.00</code> and there is a new current balance, this means that a new bill was issued by the company&#39;s system.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>type</code></td>
<td><code>bill.update</code></td>
</tr>
<tr>
<td><code>payload.data.company</code></td>
<td>The <a href="#the-company-object">company object</a> linked to this resource.</td>
</tr>
<tr>
<td><code>payload.data.bill</code></td>
<td>Object containing the names of the bill attributes that have changed and their previous values as well as the current bill due date.</td>
</tr>
</tbody></table>
<h2 id='bill-scheduled-payment-notice'>Bill scheduled payment notice</h2>
<blockquote>
<p>Example <code>bill.scheduled-payment-notice</code> Event</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"580e3e11dec21e861b5a3719"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill.scheduled-payment-notice"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-04-20T16:51:12Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"clientId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa110127118752"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"partnerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55942f330cfcfd6c4ed529d9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-id-123"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa11012711875d"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XYZ Electric"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"bill"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"dueDate"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"previous"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-20 17:00:00.000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"current"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-28 17:00:00.000"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>When the due date changes after a bill payment has been scheduled.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>type</code></td>
<td><code>bill.scheduled-payment-notice</code></td>
</tr>
<tr>
<td><code>payload.data.company</code></td>
<td>The <a href="#the-company-object">company object</a> linked to this resource.</td>
</tr>
<tr>
<td><code>payload.data.bill</code></td>
<td>The <a href="#the-bill-object">bill object</a> containing attributes that have changed with their current and previous values, if available.</td>
</tr>
</tbody></table>
<h2 id='bill-payment-sent'>Bill payment sent</h2>
<blockquote>
<p>Example <code>bill.payment.sent</code> Event</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"580e3e11dec21e861b5a3719"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill.payment.sent"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-04-20T16:51:12Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"clientId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa110127118752"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"partnerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55942f330cfcfd6c4ed529d9"</span><span class="p">,</span><span class="w">      
    </span><span class="nl">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-id-123"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa11012711875d"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Netflix"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"25.21"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"paymentMethod"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5c5b2ed67d94870391c30b33"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Johnny Appleseed"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verified"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"default"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"card"</span><span class="p">:{</span><span class="w">
              </span><span class="nl">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XXXX1111"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"bin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"41111111"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"visa"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credit"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"expDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-01T12:00:00.000Z"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"cancelled"</span><span class="p">:</span><span class="kc">false</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"assignedBills"</span><span class="p">:[</span><span class="w">
              </span><span class="s2">"5c5b2eba5ddb120427c41ba3"</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">},</span><span class="w">        
        </span><span class="nl">"surcharge"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"debit"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.50"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>When a payment is made towards a bill&#39;s outstanding balance. Note that the <code>payload.data.surcharge</code> may not be available when a company does not require it.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>type</code></td>
<td><code>bill.payment.sent</code></td>
</tr>
<tr>
<td><code>payload.data.company</code></td>
<td>The <a href="#the-company-object">company object</a> linked to this resource.</td>
</tr>
<tr>
<td><code>payload.data.paymentMethod</code></td>
<td>The <a href="#the-payment-method-object">payment method object</a> linked to the payment.</td>
</tr>
<tr>
<td><code>payload.data.amount</code></td>
<td>The amount sent to the company.</td>
</tr>
<tr>
<td><code>payload.data.surcharge</code></td>
<td>The surcharge required by the company to process the payment.</td>
</tr>
<tr>
<td><code>payload.data.surcharge.type</code></td>
<td>The type of surcharge required. Possible values are <code>credit</code>, <code>debit</code>, or <code>ach</code>.</td>
</tr>
<tr>
<td><code>payload.data.surcharge.rate</code></td>
<td>The fee amount the company requires to process the payment.</td>
</tr>
</tbody></table>
<h2 id='bill-payment-scheduled'>Bill payment scheduled</h2>
<blockquote>
<p>Example <code>bill.payment.scheduled</code> Event</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"580e3e11dec21e861b5a3719"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill.payment.scheduled"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-04-20T16:51:12Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"clientId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa110127118752"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"partnerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55942f330cfcfd6c4ed529d9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-id-123"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa11012711875d"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XYZ Electric"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"paymentMethod"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5c5b2ed67d94870391c30b33"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Johnny Appleseed"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verified"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nl">"card"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XXXX1111"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"bin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"41111111"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"visa"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credit"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"expDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-01T12:00:00.000Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"cancelled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"assignedBills"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"5c5b2eba5ddb120427c41ba3"</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"95.21"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"payDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-28 17:00:00.000"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"surcharge"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"debit"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"rate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.50"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>When a payment is made towards a bill&#39;s outstanding balance. Note that the <code>payload.data.surcharge</code> may not be available when a company does not require it.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>type</code></td>
<td><code>bill.payment.scheduled</code></td>
</tr>
<tr>
<td><code>payload.data.company</code></td>
<td>The <a href="#the-company-object">company object</a> linked to this resource.</td>
</tr>
<tr>
<td><code>payload.data.amount</code></td>
<td>The amount sent to the company.</td>
</tr>
<tr>
<td><code>payload.data.payDate</code></td>
<td>The date the bill should be paid.</td>
</tr>
<tr>
<td><code>payload.data.paymentMethod</code></td>
<td>The <a href="#the-payment-method-object">payment method object</a> linked to the payment.</td>
</tr>
<tr>
<td><code>payload.data.surcharge</code></td>
<td>The surcharge required by the company to process the payment.</td>
</tr>
<tr>
<td><code>payload.data.surcharge.type</code></td>
<td>The type of surcharge required. Possible values are <code>credit</code>, <code>debit</code>, or <code>ach</code>.</td>
</tr>
<tr>
<td><code>payload.data.surcharge.rate</code></td>
<td>The fee amount the company requires to process the payment.</td>
</tr>
</tbody></table>
<h2 id='bill-payment-cancelled'>Bill payment cancelled</h2>
<blockquote>
<p>Example <code>bill.payment.cancelled</code> Event</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"580e3e11dec21e861b5a3719"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill.payment.cancelled"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-04-20T16:51:12Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"clientId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa110127118752"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"partnerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55942f330cfcfd6c4ed529d9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-id-123"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa11012711875d"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XYZ Electric"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"paymentMethod"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5c5b2ed67d94870391c30b33"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Johnny Appleseed"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verified"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"default"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="nl">"card"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XXXX1111"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"bin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"41111111"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"visa"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credit"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"expDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-01T12:00:00.000Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"cancelled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"assignedBills"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"5c5b2eba5ddb120427c41ba3"</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"bill"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"dueDate"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"current"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-03-28 17:00:00.000"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"current"</span><span class="p">:</span><span class="w"> </span><span class="s2">"40.00"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"trigger"</span><span class="p">:</span><span class="w"> </span><span class="s2">"client"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>When a scheduled payment is cancelled.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>type</code></td>
<td><code>bill.payment.cancelled</code></td>
</tr>
<tr>
<td><code>payload.data.company</code></td>
<td>The <a href="#the-company-object">company object</a> linked to this resource.</td>
</tr>
<tr>
<td><code>payload.data.paymentMethod</code></td>
<td>The <a href="#the-payment-method-object">payment method object</a> linked to the payment.</td>
</tr>
<tr>
<td><code>payload.data.bill</code></td>
<td>Object containing the names of the bill attributes that have changed and their previous values if available.</td>
</tr>
<tr>
<td><code>payload.data.trigger</code></td>
<td>The entity that triggered this event. Possible values are <code>client</code>, <code>system</code>.</td>
</tr>
</tbody></table>
<h2 id='bill-payment-failed'>Bill payment failed</h2>
<blockquote>
<p>Example <code>bill.payment.failed</code> Event</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"580e3e11dec21e861b5a3719"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill.payment.failed"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-04-20T16:51:12Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"clientId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa110127118752"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"partnerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55942f330cfcfd6c4ed529d9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-id-123"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bill"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa11012711875d"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"25.21"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Netflix"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"paymentMethod"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5c5b2ed67d94870391c30b33"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Johnny Appleseed"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verified"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"default"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"card"</span><span class="p">:{</span><span class="w">
              </span><span class="nl">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XXXX1111"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"bin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"41111111"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"visa"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credit"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"expDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-01T12:00:00.000Z"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"cancelled"</span><span class="p">:</span><span class="kc">false</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"assignedBills"</span><span class="p">:[</span><span class="w">
              </span><span class="s2">"5c5b2eba5ddb120427c41ba3"</span><span class="w">
            </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>When a payment is unsuccessful.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>type</code></td>
<td><code>bill.payment.failed</code></td>
</tr>
<tr>
<td><code>payload.data.company</code></td>
<td>The <a href="#the-company-object">company</a> linked to this resource.</td>
</tr>
<tr>
<td><code>payload.data.paymentMethod</code></td>
<td>The <a href="#the-payment-method-object">payment method</a> linked to the payment.</td>
</tr>
<tr>
<td><code>payload.data.amount</code></td>
<td>The amount of the unsuccesful payment.</td>
</tr>
</tbody></table>
<h2 id='swap-success'>Swap success</h2>
<blockquote>
<p>Example <code>swap.success</code> Event</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"event"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"580e3e11dec21e861b5a3719"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"swap.success"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-04-20T16:51:12Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"clientId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"579b695decfa110127118752"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"partnerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55942f330cfcfd6c4ed529d9"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-id-123"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"resource"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"swap"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ce443c56013221715960365"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"clientId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5c7c01c11f915c41f89de856"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5bd885fccd274b4324a21f57"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test Merchant"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"operational"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"logo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/app-assets.unbill.io-primary/uploads/utility-provider-logos/1a49a63fa87749b3abdf74c2ee9deb36.png"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"background"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"svg"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/app-assets.unbill.io-primary/uploads/utility-provider-logos/968e40f95dd9a0e85cbae10fb221059b.svg"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"color"</span><span class="p">:</span><span class="w"> </span><span class="s2">"06C580"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"symbol"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/app-assets.unbill.io-primary/uploads/utility-provider-logos/2533c1ac55b047c770085cc24e3d1e85.svg"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"color"</span><span class="p">:</span><span class="w"> </span><span class="s2">"06C580"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"auth"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"urls"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"login"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://biller-direct.q2open.io"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"signup"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.q2ebanking.com/"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"forgotUser"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.q2ebanking.com/"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"forgotPassword"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.q2ebanking.com/"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"loginFields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nl">"placeholder"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Username"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"formType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"username"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Username"</span><span class="w">
              </span><span class="p">},</span><span class="w">
              </span><span class="p">{</span><span class="w">
                </span><span class="nl">"placeholder"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Password"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"formType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"password"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"label"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Password"</span><span class="w">
              </span><span class="p">}</span><span class="w">
            </span><span class="p">]</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"userPresenceRequired"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
          </span><span class="nl">"supportedItems"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"auth"</span><span class="p">,</span><span class="w"> </span><span class="s2">"bill"</span><span class="p">,</span><span class="w"> </span><span class="s2">"swap"</span><span class="p">,</span><span class="w"> </span><span class="s2">"payment"</span><span class="p">]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"paymentMethod"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5c8dc5ea03bb895bc3868a28"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"verified"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"card"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XXXX4444"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"bin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11111111"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"visa"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credit"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"expDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2023-06-01T12:00:00.000Z"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"cancelled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ceec9223b461830de21b024"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"swap.success"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"clientId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5c7c01c11f915c41f89de856"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"partnerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"58f528495d3f18631d04c4a1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"identifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"412255"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2019-05-29T18:02:10.804Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"__v"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>When a swap is successful.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>type</code></td>
<td><code>swap.success</code></td>
</tr>
<tr>
<td><code>payload.resource.id</code></td>
<td>The ID of the swap that was successful.</td>
</tr>
<tr>
<td><code>payload.resource.type</code></td>
<td>The type of resource referred to by the resource.id. Value: <code>swap</code>.</td>
</tr>
<tr>
<td><code>payload.data.clientId</code></td>
<td>The clientId linked to the swap.</td>
</tr>
<tr>
<td><code>payload.data.company</code></td>
<td>The <a href="#the-company-object">company object</a> related to the swap.</td>
</tr>
<tr>
<td><code>payload.data.paymentMethod</code></td>
<td>The <a href="#the-payment-method-object">payment method object</a> linked to the swap.</td>
</tr>
</tbody></table>
<h2 id='webhook-security'>Webhook security</h2>
<p>The Biller Direct/Cardswap system can also apply additional security measures to webhook events sent to partners.
These measures include oauth authentication, payload encryption and request signing.</p>
<h3 id='oauth-authentication'>OAuth Authentication</h3>
<p>The webhook can be set up to retrieve a
<a href="https://tools.ietf.org/html/rfc6749#section-4.4" target="_blank">client credentials token</a>
from an OAuth endpoint provided by the partner. The OAuth response must follow the standard client credentials format.
This token will be cached in Biller Direct/Cardswap until its expiration nears and at that point another
token will be requested from the endpoint. The resulting token will be passed as a <code>Bearer</code> token in
the <code>Authorization</code> header along with the event payload.</p>
<h4 id='setup-in-nexus'>Setup in Nexus</h4>
<ul>
<li>In the Nexus portal <code>Settings</code> view, click the <code>Edit</code> button on the desired webhook.</li>
<li>Expand the <code>OAuth</code> section of the webhook properties.</li>
<li>Enable OAuth support by toggling the checkbox.</li>
<li>Add in the <code>OAuth URL</code> provided by the partner.</li>
<li>Add in any <code>OAuth Payload</code> that should be included in the OAuth request in URL format.</li>
</ul>

<p><img src="images/examples/webhook-oauth-a3e950bd.png" alt="" /></p>

<blockquote>
<p>Example Encrypted Request</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>HTTP/1.1 200 OK
Content-Type: application/jose+json

eyJhbGciOiJSU0ExXzUiLCJlbmMiOiJBMTI4Q0JDLUhTMjU2In0.
UGhIOguC7IuEvf_NPVaXsGMoLOmwvc1GyqlIKOK1nN94nHPoltGRhWhw7Zx0-kFm
1NJn8LE9XShH59_i8J0PH5ZZyNfGy2xGdULU7sHNF6Gp2vPLgNZ__deLKxGHZ7Pc
HALUzoOegEI-8E66jX2E4zyJKx-YxzZIItRzC5hlRirb6Y5Cl_p-ko3YvkkysZIF
NPccxRU7qve1WYPxqbb2Yw8kZqa2rMWI5ng8OtvzlV7elprCbuPhcCdZ6XDP0_F8
rkXds2vE4X-ncOIM8hAYHHi29NX0mcKiRaD0-D-ljQTP-cFPgwCp6X-nZZd9OHBv
-B3oWh2TbqmScqXMR4gp_A.
AxY8DCtDaGlsbGljb3RoZQ.
KDlTtXchhZTGufMYmOYGS4HffxPSUrfmqCHXaI9wOGY.
9hH0vgRfYgPnAHOd8stkvw
</code></pre></div><h3 id='payload-encryption'>Payload Encryption</h3>
<p>Event messages to webhook endpoints may be encrypted using standards-based
<a href="https://tools.ietf.org/html/rfc7516" target="_blank">JWE (JSON Web Encryption) compact formatting</a>.
In the case of JWE formatting the key ID (kid) is stored in the JWE header included in the encoded payload.</p>
<h4 id='jwe-settings'>JWE Settings</h4>
<ul>
<li>Format - <code>compact</code> - The format of the JWE itself. Compact is an efficient encoded string.</li>
<li>Content Algorithm (enc) - <code>A256GCM</code> - The symmetric algorithm used to encrypt the actual content.</li>
<li>Key Wrapping Algorithm (alg) - <code>RSA-OAEP</code> - The asymmetric algorithm used to encrypt the symmetric key.</li>
</ul>
<h4 id='setup-in-nexus-2'>Setup in Nexus</h4>
<ul>
<li>In the Nexus portal <code>Settings</code> view, click the <code>Edit</code> button on the desired webhook.</li>
<li>Expand the <code>Payload Encryption</code> section of the webhook properties.</li>
<li>Enable encryption support by toggling the checkbox.</li>
<li>Add in the <code>Public Key URL</code> provided by the partner.</li>
<li>Add in any <code>Request Headers</code> that should be included with the request in JSON format.</li>
</ul>

<p><img src="images/examples/webhook-encryption-f99d596e.png" alt="" /></p>

<blockquote>
<p>Example <code>Signature</code> JWT Headers</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"typ"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JWT"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"alg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RS256"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"kid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"key_id_3"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"x5t"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mx3Fyhwerew23wfs"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Example <code>Signature</code> JWT Claims</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"aud"</span><span class="p">:</span><span class="w"> </span><span class="s2">"audience.example.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"iss"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example issuer"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"exp"</span><span class="p">:</span><span class="w"> </span><span class="mi">1579754951</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='rsa-request-signing'>RSA Request Signing</h3>
<p>Webhook requests may include a request signature for verification. In the case of webhooks, a signed
JWT (JSON Web Token) will be created and sent in a header of the webhook event request. The header defaults to <code>signature</code>
but this can be customized to whichever header the partner would like.</p>
<h4 id='rsa-signing-keys'>RSA Signing Keys</h4>
<p>RSA request signing key-pairs can be created in the Nexus portal <code>Settings</code> view, and the public key can be copied.</p>

<ul>
<li>A maximum of 2 keys can be created for key rotation purposes.</li>
<li>Public keys are copied in PCKS #8 format.</li>
<li>Public keys can also be retrieved from the <a href="#partner">partner public key API</a>.</li>
<li>The oldest key of the two will be used to create the request signature</li>
</ul>

<p><img src="images/examples/request-signing-keys-dd0ca681.png" alt="" /></p>
<h4 id='request-signature-setup'>Request Signature Setup</h4>
<ul>
<li>In the Nexus portal <code>Settings</code> view, click the <code>Edit</code> button on the desired webhook.</li>
<li>Expand the <code>Request Signature</code> section of the webhook properties.</li>
<li>Enable signature support by toggling the checkbox.</li>
<li>All parameters for the request signature are optional.

<ul>
<li><code>Token Issuer</code> - Specifies the <code>iss</code> value to be included with the JWT</li>
<li><code>Token Audience</code> - Specifies the <code>aud</code> value to be included with the JWT</li>
<li><code>Signature Header</code> - Specifies a request header other than <code>signature</code> to use for the signature JWT</li>
</ul></li>
</ul>

<p><img src="images/examples/webhook-signature-f7addb44.png" alt="" /></p>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
