<h2 id='connect'>Connect</h2>
<blockquote>
<p>Host
<code>
https://connect.q2open.io (production)
https://sb-connect.q2open.io (sandbox)
</code></p>
</blockquote>

<p><img src="/images/products/connect.gif" alt="Connect" /></p>

<p>Connect is a drop-in module that provides a secure, elegant authentication flow for each company that the Q2 Biller Direct API supports. Connect makes it secure and easy for <a href="#client">clients</a> to link their accounts, while doing the heavy lifting for the authentication.</p>

<p><a href="https://connect.q2open.io">View demo</a></p>
<h3 id='events'>Events</h3>
<p>Connect will emit events back to your app using the <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage">postMessage</a> API or <a href="https://developer.apple.com/documentation/webkit/wkscriptmessagehandler">WKScriptMessageHandler</a> on iOS, allowing you to decide what to do after the user is finished.</p>

<table><thead>
<tr>
<th>Event</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>auth</code></td>
<td>The user successfully authenticated with a company.</td>
</tr>
<tr>
<td><code>exit</code></td>
<td>The user exited the module without completing an authentication.</td>
</tr>
<tr>
<td><code>alive</code></td>
<td>Emitted every 30 seconds to indicate that the user is not idle.</td>
</tr>
</tbody></table>
<h3 id='userpresencerequired'>userPresenceRequired</h3>
<p>If the company requires that the user is present to pass through any security flows with every login,
as indicated by the <code>company.userPresenceRequired</code> flag, there are a number of constraints to consider when designing your user experience:</p>

<ul>
<li>Bill data cannot be updated ad-hoc without the user first passing through security.</li>
<li>Payments must be completed in real-time (not scheduled) since the user must be present.</li>
<li>Likewise, Swaps must also be completed in real-time with the user present.</li>
</ul>

<p>Instead of calling the typical API routes, you&#39;ll need to open Connect to perform these actions immediately after a successful authentication. The user won&#39;t need
 to re-enter their username and password, but may need to step through security. Using the <code>authId</code>, <code>billId</code>, <code>items</code>, and <code>paymentMethodId</code> URL parameters as
 documented below, you&#39;ll be able to make payments and swaps in real-time, while allowing users the liberty of maintaining their approach to account security.</p>
<h3 id='url-parameters'>URL parameters</h3>
<p>The following URL parameters can be optionally passed into the Connect URL to customize the experience.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>companyId</code></td>
<td>Deeplink to a specific <code>companyId</code>, skipping the search screen.</td>
</tr>
<tr>
<td><code>swapId</code></td>
<td>Can be used in conjunction with <code>paymentMethodId</code> to move a swap to a different payment method.</td>
</tr>
<tr>
<td><code>billId</code></td>
<td>Can be used in conjunction with <code>paymentMethodId</code> to make a payment when <code>company.userPresenceRequired</code> is <code>true</code>.</td>
</tr>
<tr>
<td><code>cardPaymentsOnly</code></td>
<td>Limit searches to companies that support card-based payments.</td>
</tr>
<tr>
<td><code>items</code></td>
<td>Indicates the next desired action once an authentication is successful. Set to <code>swap</code> to automatically create a <a href="#swap">Swap</a>. Set to <code>bill</code> to update bill data. Set to <code>payment</code> (in conjuction with a billId) to make a real-time payment towards the balance.</td>
</tr>
<tr>
<td><code>paymentMethodId</code></td>
<td>Sets a previously added payment method to be used for a <code>swap</code> or <code>payment</code> once an authentication is successful.</td>
</tr>
</tbody></table>
<h3 id='url-examples'>URL Examples</h3>
<p>To authenticate with a company:</p>

<p><code>https://connect.q2open.io?token=123&amp;companyId=123&amp;items=bill</code></p>

<p>To make a payment when <code>company.userPresenceRequired</code> is <code>true</code>:</p>

<p><code>https://connect.q2open.io?token=123&amp;billId=123&amp;paymentMethodId=123&amp;items=payment</code></p>

<p>To initiate a new swap:</p>

<p><code>https://connect.q2open.io?token=123&amp;companyId=123&amp;paymentMethodId=123&amp;items=swap</code></p>

<p>To move a swap to a different payment method:</p>

<p><code>https://connect.q2open.io?token=123&amp;swapId=123&amp;paymentMethodId=123&amp;items=swap</code></p>
